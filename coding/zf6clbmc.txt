Из журнала ZX Format #6,
Санкт-Петербург, 30.07.1997



      BMC - Show 'em up in colour.
        (BMC = Bitmap Multicolor)

                   или

           Авторское  описание
   8-ми цветного режима для спектрума.


(C) Reseath.
_________________________________________

  Итак,   я  Research  из  группы  Volga-
Soft,рад  представить  вам оболочку '3Co-
lor' написанную ребятами из Virt Group.
  В основу программы положен метод сложе-
ния  основных  цветов  созданный  мной, и
впервые  представленный  в нашей демо под
названием 'Pops'. Эффект тогда безжалост-
но жрал все быстродействие Z-80 и работал
на  тачках предоставляющих не менее 68400
тактов  (6144*10.5+768*5+about300), оными
оказались  мой  777,  Pentagon, Композит,
турбированные  машины... Mik из VG сделал
свой код в два экрана, плюс поставил уни-
версальный fixup, а Creator закатал все в
оболочку,  и  вот  вам  готов  '3color' -
пользуйтесь !
                  ___

            VolgaSoft rulez,
      или как это все начиналось...

  Hаверное не я один бился над такими эф-
фектами,  экспериментируя с двумя экрана-
ми, меняя цвета и т.д., но с двух экранов
на три перейти ни кто не рискнул.
  Hачалось  все  в  конце  95-го. Steal'a
забрfали  в  армию и группа рассохлась. Я
мучал свой PCюк, Cache и Phantom - Амиги.
Иногда  собирались, играли, смотрели дем-
ки,картинки  ditheren'ные мной. Два цвета
казалось мало и я решил писать prog кото-
рый  бы делал multicolor'ы а-ля Satisfac-
tion megademo. Тесты сего софта оказались
плачевными,  по  сему было решено коорди-
нально изменить подход к данному вопросу.
Снова  был  создан  целый  ворох  optimi-
zer'ов,  posterizer'ов, convert'оров, ко-
торые опять-таки не дали убедительных ре-
зультатов. Потом начались выпускные/всту-
пительные  экзамены,  освободившись в ав-
густе,  просмотрев  демки  привезенные из
Ленинграда,  я  решил  сделать multicolor
64*86 как у Busy в Echology.

"...Hочь,  птички  поют, в радиусе 30м ни
души,D.J.Research  Ltd  сидит  пишет  ORG
25000  и  думает,  что  неплохо  бы  лечь
спа-а-а-ать... А то эту гадость синхрони-
зировать  потом...  А  может  сделать вот
так..."

  И я накатал перекодировщик картинки в 3
bit  plane'a, скидывая их LDIR'oм в треть
экрана.  Потом  в  две,  потом на весь...
Впервые  я протащился так, что почти двое
суток  не спал и не чувствовал усталости,
все качал и качал.

  Давайте теперь займемся обработкой кар-
тинок,  без чего, собственно, BMC и гроша
ломаного  не  стоит.  Hе знаю, почему Got
father  уделил так мало внимания этой те-
ме, скорее всего он чего-то не знает, че-
го-то не договаривает, я, в свою очередь,
знаю  несколько  больше  чем RGB, поэтому
изложу все более подробно.

  Единственная задача - разделить картин-
ку  на основные состовляющие R/G/B, и от-
дитерить  (Dither)  каждую  из них, потом
перевести  в  1-битный формат и отправить
их на спектрум.

      Теперь  на примерах (для PC).
Во-первых достаньте следующий софт:
 1)  Corel  Photo-Paint - входит в состав
пакета Corel Draw
 2)  SEA (удобная програмка для просмотра
и конвертирования картинок из одного фор-
мата  в другой, в том числе и с урезанием
цветов)
 3) GWS 6.xx Dos (Graphic WorkShop) - см.
ниже
 4)  PV 2.xx - удобен как конвертор и за-
нимает мало места
 5) Photo Finish (v1.xx - v3.xx) - до ку-
чи.

  В  принципе,  можно обойтись одним Pho-
to-Paint'om.  Идеальный  вариант, когда у
вас есть пп.1-4.
  -  Corel Photo-Paint для редактирования
исходной  картинки  (изменение  размеров,
яркости,  контрастности и т.п.), для раз-
деления  на  RGB (пункт Image/Split chan-
nels  to/RGB), дитеринга в 1 бит (п. Ima-
ge/Convert    to/Black   and   white   (1
bit)/Screen  halftone. Разделите картинку
на 3 (R/G/B), отдитерите каждую и перево-
дите на спектрум.

  -  GWS  (Dos) позволяет сразу перевести
картинку  в  восемь  фиксированных цветов
(п. Effects/Colour reduction/Stucki/Fixed
eight colours).

  Сразу  возникает  вопрос,  а что делать
дальше ?
  Если у вас три однобитных картинки раз-
мером  256*192  -  отгружайте их в форма-
те.BMP,  тащите  на  спекки "откусывайте"
первые  62  байта,  и... переводите их из
последовательного формата спрайта (вдоба-
вок вверх ногами) в формат спектрумовско-
го экрана.

  Если вы "отмывали" цвета в GWS то, либо
делите картинку в Photo-Painte на RGB (п.
Image/Split channels to/RGB), затем пере-
водите в 1 бит (п. Image/Convert to/Black
and white /Line art), апосля чего смотри-
те  предыдущий  абзац,  либо делайте свой
анализатор/транслятор/ переводчик/конвер-
тор,  или  ждите,  пока Господь ниспошлет
вам мой новый Convert!.

  Сразу  скажу, что первые картинки "раз-
делывались"  в  Photo  Finish'e (довольно
глючная вещь),дитерились в GWS, а все ос-
тальное  делал  спектрум.Теперь,  я почти
дописал  анализатор на PC, вскоре выпущу,
тогда  "жизнь  станет  лучше, жить станет
веселей".

  Я ни слова не упомянул про Амигу - мало
у  кого из амижников есть 5'' FDD, поэто-
му.ILBM мы переводили в.PCX, который отг-
ружался на 720kb MS-DOS диск, и "разделы-
вался" опять-таки на PC.

  Если  кто  будет писать свой анализатор
на спектруме - кратко.TGA Итак у вас есть
8-ми  цветная  картинка  размером 256*192
пикселя  отдитеринная  в  GWS (кстати это
только  мы  знаем,  что она в восемь цве-
тов).  Ее  размер:  18  байт на описатель
+768   байт  палитра  +256*192  байт  сам
растр, итого 49938 байт. Описатель не ну-
жен,  ваша задача - выстроить в соответс-
твии  с  палитрой  три растра, т.к. GWS в
палитре  развел  бардак (могут встретится
несколько одинаковых цветов), перевернуть
и  перевести  эти растры в спектрумовский
формат.
  Это был лишь краткий пример использова-
ния софта, доставайте, экспериментируйте,
и не останавливайтесь на достигнутом! Ис-
пользуйте Photoshop (большие возможности,
но  тормозит) и Corel Xara (супер вещь!).
Используйте  возможности  графических ре-
дакторов  - это позволит улушить качество
картинок  и  убрать часть лишних точек, а
еще лучше рисовать сразу в восемь цветов,
дабы отказаться от дитеринга, а значит не
потерять  качество. И лучше откажитесь от
перевода  портретов  - им и 256 цветов из
262144 мало, а восемь вообще ничто, лучше
переводите фантастические пейзажи - в них
почти  весь спектр красок, да и смотрятся
красиво.
  Работы   по  "раскрашиванию"  спектрума
продолжаются, я веду researching по ново-
му BMC. Если у кого есть пожелания, сове-
ты, вопросы - пишите в ZX-Format.
  Если вы действительно хотите протащить-
ся  -  смотрите картинки на телевизоре, у
которого кинескоп с дельтаобразным распо-
ложением  электронных  пушек (61лк3ц,4ц),
ослабить  мерцание пока помогут солнцеза-
щитные очки.
                   ___

  Теперь я посвящу вас в некоторые проек-
ты  VS.  Итак,  мы выпустили "POPS DEMO",
ассемблер  XAS/VS  9.07, который мало чем
похож  на старый XAS (64 символа, быстрые
вычисления,  исправлены  все  глюки, мно-
жество дополнений...), сейчас пишутся CO-
PY'97 - копирует из MS-DOS в TR-DOS, CON-
VERT!  делает  готовый  к  употреблению в
3Color'e  файл  из.TGA  после обработки в
GWS  (пишется на PC), новый ассемблер ра-
ботающий  со  вторым  экраном,  а главный
проект  -  это  совершенно уникальный 4-х
канальный музыкальный редактор RIFF TRAC-
KER,  для  платы GENERAL SOUND, в котором
можно  писать.MOD'ы  длинной  до 128кб! В
тольяттинском  отделении VS (а есть и та-
кое)  готовится к выходу новая игра "BLO-
OD".  Жаль,  что меня нет там, я бы помог
Cache'у с графикой, поэтому если вы рису-
ете,  и  живете в Тольятти - то позвоните
по тел. 35-11-30 (Константин)

                Это все.
_________________________________________