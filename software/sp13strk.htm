<pre>
Из журнала Spectrofon #13,
Москва, 13.05.1995



+------------------------------+
| ---------- СИСТЕМА --------- |
+------------------------------+



   Как  мы  и  обещали,  сегодня
речь пойдет о музыкальном редак-
торе  "SOUND  TRACKER". Вернее о
пакете программ "SOUND TRACKER",
предназначенном   для  работы  с
музыкальными      сопроцессорами
AY-3-8910  или AY-3-8912. Нижес-
ледующее  описание  для тех, кто
только начинает работать с паке-
том программ "SOUND TRACKER".








 Юрий Матвеев

    S O U N D   T R A C K E R
 -------------------------------
      Музыкальный редактор
        для "ZX-SPECTRUM"

   На  сегодняшний  день  много-
функциональный  музыкальный  ре-
дактор "SOUND TRACKER" - один из
самых  дружественных редакторов,
существующих  для "ZX-SPECTRUM".
Он  довольно  удачно  сочетает в
себе простоту управления и бога-
тые  возможности.  Львиная  доля
музыки,        играющей       на
"ZX-SPECTRUM",  написана  в этом
редакторе.

   Немного  о терминах и осново-
полагающих  принципах рассматри-
ваемого  музыкального редактора.


   Любое  музыкальное произведе-
ние,    написанное    в   "SOUND
TRACKER",  состоит из n-го коли-
чества     отрезков     (паттер-
нов/PATTERN),  где n - величина,
принимающая значения от 1 до 32.
То  есть  в  композиции не может
быть  больше 32 паттернов. Длина
музыкального  произведения может
быть  от 1 до 256 позиций. Можно
условиться,  что  позиция  - это
некая ячейка, в которую вставля-
ется один из паттернов. Вы може-
те,  скажем, написать всего один
паттерн и прокрутить его во всех
возможных 256 позициях, т.е. 256
раз.







   Каждый  паттерн,  в свою оче-
редь,  может содержать в себе от
1  до 64 нот. Длина паттерна за-
дается   для  каждой  композиции
один  раз  и  одинакова для всех
паттернов, составляющих эту ком-
позицию.  Это,  кстати, является
одним   из  главных  недостатков
"SOUND TRACKERа".

   Еще два термина, используемые
музыкантами,  работающими в этом
редакторе  -  SAMPLE  (Сэмпл)  и
ORNAMENT (Орнамент). Сэмпл - это
тембровая окраска звука, которая
определяется   формой  звукового
сигнала, его амплитудными и час-
тотными   характеристиками.  Для
удобства   мы   будем   называть
сэмпл  инструментом.  Орнамент -
это дополнительный частотный эф-
фект,  который изменяет звучание
сэмпла,  например,  понижает или
повышает высоту тона и т.д.
   Сегмент - единичная составля-
ющая  каждого звука в редакторе.
Звук  может  состоять  из n-ного
количества сегментов, где n при-
нимает значения от 1 до 32.

            КРАТКИЕ
   ТЕХНИЧЕСИЕ  ХАРАКТЕРИСТИКИ
    МУЗЫКАЛЬНОГО  РЕДАКТОРА
       "SOUND TRACKER"

Количество октав: 8

Количество позиций: 1-256

Количество паттернов: 1-32

Количество нот в паттерне: 1-64

Число инструментов: 16

Число орнаментов: 16


Возможность  записи откомпилиро-
ванных  музыкальных произведений
для  дальнейшего использования в
любых других программах: Есть.

Управление: курсор+клавиатура

Клавиши: Q,CS,O,P,SPACE.


         ГЛАВНОЕ МЕНЮ

   Сразу после загрузки редакто-
ра  вы попадаете в главное меню.
Управление  в редакторе основано
на     использовании    символов
"/\ \/".  Рассмотрим  по-порядку
его основные опции (значки /\\/,
следующие  после названия опции,
означают,  что  указанная  опция
настраиваемая):
</pre>
<img src=sp13strk\pic1.gif>
<pre>
POSITION /\ \/ (1-256) - счетчик
позиций.  Каждая  позиция непос-
редственно   связана  с  номером
паттерна (музыкального отрезка),
установленного  в опции PATTERN.
Связка POSITION - PATTERN задает
последовательность  проигрывания
музыкальных отрезков.

PATTERN /\ \/  (1-31)  -  в этой
настраиваемой опции устанавлива-
ются  номера  музыкальных отрез-
ков.

HEIGHT /\ \/(0-255) - в этой оп-
ции можно повысить (понизить) на
n-ое  количество  полутонов  все
ноты паттерна в данной позиции.

LENGTH /\ \/ (1-256) - здесь ус-
танавливается  длина музыкальной
композиции (в позициях).


SAMPLE /\ \/ (1(0)-15)  -  опция
позволяет   выбирать  инструмент
для  видоизменения  длительности
его  звучания  при  помощи опций
REPEAT  и  REPLEN. При установке
нуля в опции SAMPLE редактирова-
ние  длительности отключено. Ус-
тановленный  здесь номер инстру-
мента автоматически прикрепляет-
ся к каждой ноте, записываемой в
нотную секцию.

REPEAT /\ \/ (1(0)-32) - опреде-
ляет,  с  какого сегмента повто-
рять  проигрывание  звука.  Если
здесь  указать 0, то звук проиг-
рывается один раз без повторов.

REPLEN /\ \/ (1-32) - определяет
сколько сегментов повторить, на-
чиная   с   указанного  в  опции
REPEAT. Если здесь указать 1, то
будет   проигрывается   сегмент,
указанный в REPEAT.
Все повторения осуществляются до
очередного  звука. Указанные из-
менения  касаются  и  орнамента,
если таковой установлен при про-
игрывания данного инструмента.

PATTERN  - при выборе этой опции
проигрывается   текущий  отрезок
композиции, установленный опцией
P:NN, где NN - номер паттерна.

PLAY  - выбрав эту опцию, вы мо-
жете прослушать музыкальную ком-
позицию начиная с отрезка, уста-
новленного   в  опциях  POSITION
/\ \/ и PATTERN /\ \/.

STOP  -  остановка  проигрывания
композиции  или  выход из режима
редактирования.

EDIT - режим редактирования ком-
позиции.

OCT: N - индикатор текущей окта-
вы, где N - номер октавы от 1 до
8.

QUIT - выход из музыкального ре-
дактора.     Программа    просит
подтвердить выход (Y/N). При вы-
ходе  из редактора, информация о
музыкальной композиции теряется.

A: ON/OFF - вкл./откл. канала A.

B: ON/OFF - то же для канала B.

C: ON/OFF - то же для канала С.

ORN.EDIT - создание/редактирова-
ние орнамента.

SAMP.EDIT  - создание/редактиро-
вание инструмента.



MODE  -  индикатор, отображающий
текущий  режим  работы редактора
PLAY/EDIT.

OTHER - переход к подменю.

/\ \/ - выбор отрезка композиции
в  нотной  секции для проигрыва-
ния с помощью опции PATTERN.

   В нижней части экрана главно-
го  меню располагается амплитуд-
но-частотный индикатор.


            ПОДМЕНЮ

   Подменю  редактора вызывается
по  выбору опции OTHER. Здесь вы
можете произвести дополнительные
настройки редактора, сохранить и
загрузить музыкальную композицию
и  др.  Рассмотрим опции подменю
подробнее:
</pre>
<img src=sp13strk\pic2.gif>
<pre>
LOAD  SAMPLE - загрузить инстру-
мент.  После  выбора  этой опции
запрашивается  номер инструмента
и  его имя (расширение &lt;s&gt; - ма-
ленькое). Правда, стоит обратить
внимание,  что номер инструмента
никакого  значения  не  имеет  -
загружаемому в память инструмен-
ту присваивается номер под кото-
рым  он был сохранен. Чем вызван
этот  небольшой "глюк" программы
- неизвестно.

LOAD  ORNAMENT - загрузить орна-
мент  (расширение &lt;о&gt;). Все про-
цедуры    аналогичны    загрузке
инструмента.

LOAD  SONG  - загрузить компози-
цию,  причем в загружаемом блоке
находятся  все инструменты и ор-
наменты.


SAVE  SAMPLE - сохранить инстру-
мент.

SAVE  ORNAMENT - сохранить орна-
мент.

SAVE  SONG  - сохранить компози-
цию.

CLEAR  SAMPLE  - стереть инстру-
мент. Запрашивается его номер.

CLEAR  ORNAMENT  - стереть орна-
мент. Запрашивается номер.

CLEAR  SONG  -  стереть  целиком
композицию,  включая инструменты
и орнаменты.

CLEAR PATTERN - очистить текущий
или  все отрезки. По выбору этой
опции выдается вопрос: "очистить
все  паттерны?  Y/N", если N, то
очищается  текущий паттерн.
DELAY  CHANGE  (N)  -  изменить
скорость воспроизведения. Грани-
цы изменений от 1 до F. 1 - мак-
симальная  скорость,  F  - мини-
мальная.

CHANGE  PATTERN LENGTH (N) - вы-
бор максимально возможного коли-
чества  нот в отрезке. Проще го-
воря - изменение длины паттерна.

PLAY SONG - проиграть композицию
сначала.

TRANSPOSITION  - понижение/повы-
шение высоты тона отрезка компо-
зиции.  Запрашивается номер пат-
терна, канал, первая и последняя
ноты,  на какое количество полу-
тонов поднять или опустить.

DEVICE  -  выбор типа носителя -
диск, кассета.

MOVE TEXT - перемещение отрезков
композиции  в  любое  нужное вам
место.  Запрашивается номер пат-
терна,  из  которого переносится
отрезок,  затем  номер паттерна,
куда  переносится отрезок. После
этого задается переносимый отре-
зок: с какой позиции паттерна по
какую.  Далее  указывается номер
позиции, на которую устанавлива-
ется  отрезок,  а затем с какого
канала  на какой вы хотите пере-
нести отрезок.

RETURN - возврат в главное меню.

         РЕДАКТИРОВАНИЕ
         --------------
           Опция EDIT

   Остановимся  подробнее на оп-
ции EDIT - по которой вы перехо-
дите в режим создания и редакти-
рования музыкальной композиции.
   После выбора этой опции появ-
ляется  еще один курсор, который
устанавливается  на нулевую ноту
текущего отрезка. Редактирование
осуществляется  в нотной секции,
разделенной на три части - кана-
лы А,B и С.

   Здесь  надо сказать несколько
слов о расположении каналов. Так
сложилось,  что  четкого "ГОСТа"
на расположение каналов нет. Это
связано  с тем, что изначально в
фирменных  моделях "ZX-SPECTRUM"
сопроцессор   подключался  таким
образом,  что все три канала че-
рез  резистор выводились на один
встроенный динамик. То есть ни о
каком стереоэффекте речь не шла,
так  как все три канала микширо-
вались  и  были абсолютно равно-
ценны  по  звучанию.


   Сейчас  уже трудно точно ска-
зать когда и где три канала соп-
роцессора  стали  независимы. Но
только с тех пор началась страш-
ная путаница с их ориентацией. А
проблема  заключалась  в следую-
щем:  какой  канал считать сред-
ним? B или С? Это было бы не так
страшно,  если  бы  разработчики
отечественных "Speccy" не "приг-
лушали" бы серединный канал спе-
циальными  схемами включения для
придания звучанию дополнительно-
го  шарма. В тех моделях компью-
теров, где ни один из каналов не
имеет особенного включения, звук
наиболее  близок к фирменным ма-
шинам. Там же, где один из кана-
лов приглушен (а таких, по неко-
торым   сведениям,  большинство)
начинаются  проблемы. Этих проб-
лем можно было бы избежать, если
бы  производители определились с
серединным  каналом.
   Но согласия до сих пор нет. В
редакции   журнала  "SPECTROFON"
принят  следующий  стандарт: A -
левый канал, B - правый канал, С
-  середина.  Такое расположение
каналов  имеет большинство моде-
лей  "ПРОФИ" и "ПЕНТАГОНА". Если
у вашей машины расположение дру-
гое,  то иногда возможны отличия
в звучании некоторых музыкальных
композиций.  Эти  отличия обычно
выражаются  в  заглушении одного
канала другим, а также иными по-
бочными  эффектами.  Это зависит
от сложности звуков и их сочета-
ний,  используемых в музыкальной
композиции.

   Но вернемся к редактору.

   Каждый канал А,B или С делит-
ся  в  свою  очередь  еще на две
секции:  нотную  и  адресную.

   В  нотной секции записываются
непосредственно ноты. Каждая но-
та  записывается  в секцию путем
нажатия  соответствующей ей кла-
виши. Принятые в "SOUND TRACKER"
обозначения:

+-----------+----------+-------+
|ОБОЗНАЧЕНИЕ|   НОТА   |КЛАВИША|
+-----------+----------+-------|
|   С       |   ДО     |   Z   |
|   C#      | ДО ДИЕЗ  |   S   |
|   D       |   РЕ     |   X   |
|   D#      | РЕ ДИЕЗ  |   D   |
|   E       |   МИ     |   C   |
|   F       |   ФА     |   V   |
|   F#      | ФА ДИЕЗ  |   G   |
|   G       |  СОЛЬ    |   B   |
|   G#      |СОЛЬ ДИЕЗ |   H   |
|   A       |   ЛЯ     |   N   |
|   A#      | ЛЯ ДИЕЗ  |   J   |
|   B       |   СИ     |   M   |
+-----------+----------+-------+

   Перемещение  по  секциям осу-
ществляется  с помощью курсорных
клавиш. Октава задается цифровой
клавишей + SS.  Клавиши,  приве-
денные  в  таблице, задают ноты.
Чтобы  заставить записанную ноту
зазвучать,  нужно  установить  в
первом   разряде   адреса  номер
инструмента  (инструмент  должен
быть создан в "редакторе инстру-
ментов",  вызываемому при выборе
опции SAMP.ED).

  Пример  записи  нот  в отрезке
для одного из каналов:

      +-------------------+
      |   00   С-4  AF00  |
      |   01   ---  0000  |
      |   02   D#4  0000  |
      |   04   B-3  0000  |
      |   05   R--  0000  |
      |   07   C-4  0000  |
      +-------------------+
  R - Пауза, выключение предыду-
щего звука.

   В  адресной  секции,  которая
содержит  четыре цифровых разря-
да,  записываются характеристики
звука.  Остановимся на этом под-
робнее.

          РАЗРЯД: 1234
           АДРЕС: 0000

   Первый  разряд адреса: задает
номер инструмента для проигрыва-
ния  данной  ноты. Числа от 0 до
F. "0" - в данном случае означа-
ет,  что  озвучивание  ноты осу-
ществляется    указанным   ранее
инструментом. Таким образом, вам
необязательно  каждый раз писать
для   ноты   номер  инструмента,
инструменты  задаются по умолча-
нию.

   Второй  разряд адреса: задает
форму  огибающей создаваемой му-
зыкальным  сопроцессором. Обычно
используются огибающие с номера-
ми  8,A,C,E.  Указав  во  втором
разряде  одну из этих огибающих,
вы  используете третий и четвер-
тый    разряды   для   установки
константы. Таблица огибающих для
каждой ноты приведена ниже. Если
в этом разряде указать F, то ис-
пользуемый инструмент будет зву-
чать  вместе  с орнаментом (если
заполнен  четвертый  разряд) или
без  него (если в четвертом раз-
ряде ноль).

   Третий  разряд адреса: здесь
устанавливается  число  старшего
разряда константы для огибающей.




   Четвертый разряд: номер орна-
мента  (если  во  втором разряде
стоит  F).  Если  перед этим шел
музыкальный  отрезок с использо-
ванием  огибающих  сопроцессора,
то они выключаются.

 ТАБЛИЦА ДЛЯ ОГИБАЮЩИХ: 8,A,C,E
   +------+----------------+
   | НОТА |   КОНСТАНТА    |
   +------+----------------|
   |  C-  | 0F,1E,3C,78,F0 |
   |  C#  | 0E,1C,38,70,E0 |
   |  D-  |    1B,36,6C,DA |
   |  D#  |    19,32,65,CA |
   |  E-  | 0C,18,30,60,C0 |
   |  F-  | 0B,16,2C,5A,B8 |
   |  F#  |    15,2A,54,A8 |
   |  G-  | 0A,14,28,50,A0 |
   |  A-  | 09,12,24,48,90 |
   |  A#  |    11,21,42,84 |
   |  B-  | 08,10,20,40,80 |
   +------+----------------+

            ПРИМЕР:

--+----------+--------+--------+
00| C-2 9C3C | R 0000 | R 0000 |
01| D#2 0A32 |   0000 |   0000 |
02| F-2 0A2C |   0000 |   0000 |
03| G-2 0A28 |   0000 |   0000 |
--+----------+--------+--------+



   РЕДАКТИРОВАНИЕ ИНСТРУМЕНТА
   --------------------------
         Опция SAMP.ED

   После  того  как  вы выберете
эту  опцию вам предложат выбрать
номер   инструмента,  подлежащий
редактированию.  Затем вы оказы-
ваетесь  в следующем настроечном
экране:
</pre>
<img src=sp13strk\pic3.gif>
<pre>
   В верхней части экрана посег-
ментно  редактируется форма сиг-
нала:  для каждого из 32 сегмен-
тов  задается громкость его зву-
чания. Клавиши управления приво-
дятся  здесь же. Под каждым сег-
ментом   указывается   состояние
маски:  1  - звука нет, 0 - звук
есть.  Переход  к редактированию
частотных характеристик - ENTER.

   В  нижней части экрана редак-
тируются  шумовые характеристики
звука. Чем выше столбик редакти-
руемого   сегмента,  тем  больше
амплитуда  шума. Обычно к редак-
тированию шума обращаются, когда
нужно создать необычные звуковые
эффекты  или совместить "чистый"
звук  с каким-либо инструментом,
например, с ударными. Маска нак-
ладывается аналогично предыдущей
операции.  Полученный звук можно
прослушать, нажав клавишу 0.
   После  того, как вы определи-
тесь  с  формой  сигнала,  гром-
костью  его  звучания и шумовыми
эффектами,  нажмите  ENTER.  Вам
будет предложено отредактировать
частотные характеристики каждого
сегмента.   Здесь  вы  изменяете
частотный  спектр звука. Обычно,
в  этой части редактора добавля-
ются   дополнительные  штрихи  к
звучанию каждого сегмента звука.
Вы  можете  поднять или опустить
частоту,  сделать это плавно или
резко. Диапазон изменяемых вели-
чин  очень широк, что, несомнен-
но,  расширяет  возможности  для
творчества  в  области  создания
необычных,   интересных  звуков.
Начинающим  музыкантам  советуем
на  первом этапе не трогать час-
тотные параметры, а сразу перей-
ти к написанию музыки.


    РЕДАКТИРОВАНИЕ ОРНАМЕНТА
    ------------------------
         Опция ORN.EDIT

   Здесь все аналогично редакти-
рованию  частотных характеристик
инструмента,  только в редакторе
орнамента  для  каждого сегмента
вам  нужно будет указать не час-
тоту,  а величину смещения в по-
лутонах.  Вы можете опустить или
поднять на нужное вам количество
полутонов звук каждого сегмента.
Созданный  орнамент, при его ис-
пользовании,   дополняет   стан-
дартный инструмент звуковыми эф-
фектами.


   После  того,  как  композиция
написана, вы можете сохранить ее
на  диск (расширение &lt;S&gt;) или на
кассету.

   Для  того, чтобы использовать
полученный  музыкальный  блок  в
других программах, его нужно от-
компиллировать  с  помощью прог-
раммы  "S.T. COMPILER" и присое-
динить  управляющую  программу -
проигрыватель.


P.S.  Описание составлено на ос-
нове личного опыта общения с ре-
дактором  "SOUND TRACKER". Автор
благодарит  Кузина С.А.  за  по-
сильную помощь в подготовке дан-
ного  описания, а также передает
отдельное спасибо Савощенко С.Д.
за   подборку   материалов,  ис-
пользованных автором в работе.
</pre>