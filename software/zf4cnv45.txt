Из журнала ZX Format #4,
Санкт-Петербург, 15.06.1996



           Описание программы
      'CONVER-Commander V 4.50 pro'

   (журнальный  вариант,  полный можно
        получить в фирме LOGROS)

(C) Юрий Ковалевский
_________________________________________

Минимальная конфигурация системы:

процессор_Z80A  (3.5 MHz)
память____48К
DOS_______5.01 5.01' 5.03 5.03' 5.04Т


Желательная конфигурация системы:

процессор_Z80B   (7.0 MHz)
память____256К   (KAY, ZS-256, Profi)
DOS_______5.03

  Программа адаптирована к машинам Penta-
gon-128,  Scorpion-256,  KAY-256,  Profi.
Из-за  отсутствия  сведений по расширению
все остальные SPECTRUM-клоны скорее всего
будут опознаны, как Spectrum-128.


  H E L P M E !!! Кто знает, как бороться
с 'TURBO 2+'?
Попавший  в мои руки паталог отказывается
работать  в TRDOS при включенном 'turbo'!
Также  невозможно  понять,  как заставить
его работать в режиме 'Spectrum' с расши-
ренной RAM!

                ________

       Отличия от версии 'V 4.23':

-исправлена   система   перехвата  ошибок
TR-DOS;
-исправлена  ошибка при вводе номеров до-
рожек и секторов в HEXвиде;
-исправлена ошибка в команде [F] ДОКТОРа,
связанная с одиночным десятичным нулем;
-исправлена  ошибка команды ФОРМАТИРОВАТЬ
ДИСК при работе с неформатированными дис-
ками;
-исправлена  ошибка Дизассемблера - выда-
вал 'SBC A,n' вместо 'IN A,(n)';

-при  задании имени диска длинее 8 симво-
лов,  в последнем символе устанавливается
7-й бит;
-на  40%  ускорен вывод информации на эк-
ран;
-в  режиме  COMMANDERа  добавлена команда
'АЛЬТЕРНАТИВНАЯ    МАСКА',    позволяющая
быстро сменить текущую маску на альтерна-
тивную  и  наоборот нажав на [SS]/[M] или
[Space];
-если  расширение  файла в МАСКЕ 'В', за-
пуск файлов происходит без запроса разре-
шения;
-команда ДОКТОРА 'ПРОДОЛЖИТЬ ПОИСК' пере-
несена с коследовательности [CS]/[SS]+[N]
на непосредственный вызов [SS]/[I];
-команда    выхода   из   ДОКТОРа   стала
[CS]/[SS]+[SS]/[M];
-в  ДОКТОРе  добавлена  возможность ввода
при  редактировании  в  символьном режиме
знаков []~|\{} ;
-просмотр BASIC-файлов стал возможен и на
TR00;
                  ____

       Отличия от версии 'V 4.32':

-чтение  и запись информации на диск про-
водятся  минуя  стандартную  точку  входа
TRDOS  (15635),  что значительно повысило
скорость  копирования  и уплотнения (осо-
бенно для fast-дисков);
                  ____

 Явным  минусом  этой  программы является
то,  что работая с диском она предполага-
ет,  что  имеет  дело с дисководом 2*80 и
дисками,  имеющими аналогичное форматиро-
вание.

 При  вводе строчной информации действуют
клавиши:

[Caps Lock]_заглавные/строчные символы;
[SS]/[I]____замена/вставка символов;
[Delete]____стереть символ;
[Graphics]__очистка строки;
[Break]_____отмена операции;


 Непосредственно выполняемые команды:

[курсор вверх]/[...вниз]-движение курсора
в каталоге;

[True  video] или [курсор влево]-предыду-
щая страница каталога;

[Inv.video] или [курсор вправо]-следующая
страница каталога;

[Edit]-перезагрузка диска.
 Отмена команды-[Break], [Edit].
 Аналогичного  результата  можно добиться
нажав клавишу, соответственно дисководу:
  [A]...[D].

[Graphics]-маркировка файлов [вкл./выкл.]
(стертые файлы НЕ маркируются, для марки-
ровки их нужно восстановить);

[Enter]-запуск  BASIC-... и MAGIС-файлов.
Если установленная маска имеет расширение
'В',  то старт файлов происходит БЕЗ ЗАП-
РОСА РАЗРЕШЕНИЯ на запуск;

[Extend  mode]-вызов  меню дополнительных
команд.  Обратите внимание. Некоторые ко-
манды  имеют  в  начале некий символ. Это
клавиша, нажав на которую Вы сразу, минуя
меню,  попадаете в нужную команду. Делать
это  можно,  как из меню команд, так и из
основного режима COMMANDERа.

         Дополнительные команды:

'Сменить маску'-установка фильтра доступа
к  файлам  в каталоге. Вы можете работать
только с теми файлами, имена и типы кото-
рых  совпали с установленной Вами маской.
-знак  '.' (точка) означает любой символ;
-знак '?' в начале имени оставляет на эк-
ране только стертые (Del.) файлы, в любой
другой  позиции  это  просто знак вопроса
-[Graphics]_заполняет  строку точками (не
пробелами!);

'Альтер.маска'-обмен   текущей  маски  на
альтернативную. Сразу после запуска прог-
раммы:
текущая   маска: '........ В'
альтернативная:  '........ .'

'Маркировать  все файлы'-маркируются фай-
лы, прошедшие через маску (кроме Del).

'Удалить маркировку'-снятие маркировки со
ВСЕХ  файлов  в каталоге, вне зависимости
от маски.

'+/-  DEL.  файлы'-  вкл./выкл. просмотра
Del-файлов. При включенном просмотре воз-
можно  их восстановление переименованием.
DEL-файлы   обозначаются  красным  знаком
вопроса в первой позиции имени. После ос-
новного каталога выводятся 'мертвые' фай-
лы черным цветом.

'Переименовать  файл'-изменение  имени  и
типа  файла  под  курсором. Таким образом
можно  восстановить  стертый файл. Можно,
также,  восстановить  'мертвый'  файл, за
концом  каталога, но при этом НЕ ГАРАНТИ-
РУЕТСЯ  ПРАВИЛЬНОЕ  ВОССТАНОВЛЕНИЕ.  Если
после восстановления имя файла маркирует-
ся,  значит  такого файла реально уже нет
на диске (т.к. он затерт вновь записанны-
ми).  Рекомендуется  сразу-же  уничтожить
его! Но если ОЧЕНЬ ХОЧЕТСЯ, можно не сти-
рать.  Если  на диске на 160 дорожке есть
копия  каталога и в 8-м секторе 0 дорожки
стоит  метка 'COMMANDER'а, копия каталога
будет обновлена (автообновление копии ка-
талога)!

'Стереть  файл(ы)'-на диске стираются все
маркированные файлы. (при стирании с дис-
ка  ВСЕХ файлов, диски, отформатированные
на  повышенный  объем секторов, сохраняют
его).
  Выполняется  автообновление копии ката-
лога!

'Склеить  файлы'-маркированные файлы сли-
ваются в один. Существуют следующие огра-
ничения. Файлы должны располагаться стро-
го  друг  за другом. Между ними не должно
быть  других файлов (даже стертых). Файлы
сливаются в порядке расположения. Суммар-
ный  файл  получает  данные принадлежащие
первому из них: (имя, тип, длина в байтах
и т.д.) и длину в секторах, соответствую-
щую  суммарной (если она не превысила 255
секторов).
  Выполняется  автообновление копии ката-
лога!

'Копировать  файл(ы)'-с диска на диск ко-
пируются маркированные файлы. Если не от-
маркировано ни одного файла, то копирует-
ся файл, на котором стоит курсор (если он
не  является стертым). Программа запраши-
вает  направление копирования и, если оно
производится  на одном дисководе, спраши-
вает,  делать-ли контроль дисков. Если Вы
выберите  контроль,  программа будет сле-
дить  за правильностью смены дисков. Если
Вы  не выберите контроль, то правильность
смены дисков останется на Вашей совести.
   Если  на  принимающем  диске  уже есть
файлы  имена  и  типы которых совпадают с
копируемыми,  запрашивается разрешение на
их копирование:

Y_перезаписать - файл  с  таким именем на
принимающем  диске при копировании стира-
ется;

D_дублировать  - на принимающем диске по-
лучается  два файла с одинаковыми именами
и типами - старый и новый;

N_не  копировать - файл снимается с копи-
рования;
  Выполняется  автообновление копии ката-
лога!


'Копировать   диск'-команда,  близкая  по
своему значению к так называемым потреко-
вым копировщикам. Имеет 2 режима.
  Первый, когда копируется только рабочий
объем  диска,  с 0-й дорожки по последнюю
занятую  включительно.  Объем оставшегося
свободного  пространства  на  принимающем
диске  вычисляется исходя из числа ОТФОР-
МАТИРОВАННЫХ  на нем секторов (что исклю-
чает  урезание  объема принимающего диска
при  копировании  с  диска  2544  на диск
2800.  При этом режиме копирования сохра-
няется имя принимающего диска.
  И  второй, когда копируется 160 дорожек
диска.  В обоих случаях производится ана-
лиз  системной  дорожки копируемого диска
и,  если  на ней нет нестандартных секто-
ров,  она  целиком копируется на диск-ко-
пию.  Если анализ показывает наличие нес-
тандартных  секторов  (что в 99% означает
защищенный  от  копирования диск) в целях
соблюдения авторских прав на копирование,
с диска на диск переносятся только 9 сис-
темных  секторов.  Если  при  этом  часть
программ потеряет работоспособность, зна-
чит такова их судьба!

'Перенос файлов на диске'-отмеченные Вами
файлы  будут  перемещены в конец рабочего
пространства диска.
  Выполняется  автообновление копии ката-
лога!

'Уплотнить диск'-функция аналогичная 'MO-
VE'  TR-DOS,  только  выполняется гораздо
быстрее.  Если  при уплотнении произойдет
сбой,  чего я Вам искренне не желаю, и Вы
выйдите из аварийного меню по 'Abort', то
программа постарается принять меры, чтобы
свести  ущерб  от  этого к минимуму, что,
однако, ей может не всегда удасться!
  Выполняется  автообновление копии ката-
лога!

'Дисковый  ДОКТОР'-выход  в режим 'Докто-
ра'. Следует учесть, что программа выйдет
в  Доктор на то место на диске (дорожка/-
сектор)  с которого Вы покинули его прош-
лый  раз.  Изначально, после запуска COM-
MANDERа устанавливается выход в Доктор на
0 дорожку 0 сектор.
  Конкретные  подробности  работы Доктора
смотрите далее!

'Изменить  имя диска'-Вам предоставляется
возможность  сменить  имя  диска. Если Вы
раздумали  это делать, нажмите [Break]. В
отличие от большинства других программ Вы
можете  ввести  не 8, а 11 символов имени
диска.  (подобное расширенное имя поддер-
живают 'MicroEditor'- версии старше 3.08,
'Games Loader'- версии старше 3.20' и ко-
манды  TR-DOS CAT и LIST). /эти данные на
31 05 1996/.
  Выполняется  автообновление копии ката-
лога!

'Просмотр  Tr  160'-  на  экран выводятся
данные каталога со 160 дорожки диска, ес-
ли, конечно, там есть копия каталога. При
просмотре  копии  каталога вызов меню до-
полнительных  команд,  запуск файлов и их
маркировка  блокированы. Вы можете только
просмотреть копию каталога, изменить мас-
ку ([0]), выбрать режим определения длины
файла  ([SS]/[J])  и  включать/ выключать
режим  вывода  на  экран  стертых  файлов
([3]). Для выхода из функции перезагрузи-
те диск. Если появляется сообщение "Копия
устарела",  то значит в системной дорожке
были  какие-то  изменения  не внесенные в
копию и ее рекомендуется обновить, выпол-
нив команду: 'Tr 00 -> Tr160'.

'Tr 00 -> Tr160'-сохранить копию каталога
диска на 160 дорожке этого же диска. Если
она не свободна (т.е. диск отформатирован
более,  чем  на 160 дорожек и заполнен до
конца),   сохранение   не  производиться!
Программа  ставит  в  8 секторе 0 дорожки
свой маркер-определитель сохранения ката-
лога  по  системе  'CONVER'. Не при каких
условиях  НЕ стирайте и НЕ изменяйте его,
иначе,  при выполнении команд, изменяющих
область  каталога, не будет производиться
автоматическое  обновление  копии  на 160
дорожке! С TR00 на TR160 переноситься со-
держимое  первых  256  байт 16 секторов с
номерами 0...15. Никакие отличия от стан-
дартов  форматирования для TR-DOS, никоим
образом не запоминаются!

'Tr160 -> Tr 00'-перенести копию каталога
со  160  на 0 дорожку (если она там есть,
копия-то  !)  Здесь  возможны 3 варианта.
Подробности в фирменном описании.

'Восстановить    каталог'-иногда   бывает
из-за  какой-нибудь ошибки портиться сис-
темный  сектор  диска  и он перестает чи-
таться  и  TR-DOS  выдает сообщение "Disk
error".  Умудренный  программист  конечно
сумеет  с  помощью  'disk Doctor'а спасти
дискету.  Тем  же  кто  это  сделать не в
состоянии или ленится, может быть поможет
эта  команда. Она восстанавливает систем-
ный  сектор диска на основании данных ка-
талога из 0-7 секторов, причем делает это
достаточно 'умно'.
  Разумеется,  если  один из 0-7 секторов
перестал читаться или в него вдруг попала
'левая'  информация (так умеют делать при
сбое  многие программы, например: GENS4),
могут  пропасть до 16 имен файлов. Правда
такая  фатальная  для  TR-DOS ошибка, как
несовпадение контрольной суммы при чтении
сектора,   обходится  этой  программой  и
часть информации может быть спасена.
  После  прочтения каталога программа вы-
водит результаты своего "труда" на экран:
  +=========================+
  || 0| 1| 2| 3| 4| 5| 6| 7||
  |   R__повторить  чтение  |
  |   Y__продолжить работу  |
  +=========================+
  Цвета здесь обозначают то-же, что и при
чтении  дорожек  в DOCTORе (см.ниже). Вам
при  этом  предлагается возможность прер-
вать операцию, нажав [Break]. Если нажать
[R], то будет сделана еще попытка чтения.
Если  ответить  [Y], программа запишет на
TR00  результаты  своего труда, если надо
переформатировав перед этим дорожку.
  Восстановленный  каталог получает метку
и  теперь  в  основном экране COMMANDERа,
при  загрузке диска с меткой, окно данных
диска получает красную рамку (Чтоб помни-
ли, что восстановлен !).
  Метка  снимается COMMANDERом при опера-
циях копирования на восстановленный диск,
уплотнения,  перемещении файлов, удалении
файлов с диска.

'Форматировать диск'-форматированиие дис-
ка 2*80 с произвольным заданием чередова-
ния,  смещения  секторов  и межсекторного
пробела (в разумных пределах).
  +================+
  | Чередование_0  |
  | Смещение____2  |
  | Интервал___50  |
  | Повторов____1  |
  | Дорожек_____160|
  +================+
=  "ЧЕРЕДОВАНИЕ" это порядок расположения
секторов  на дорожке: Наибольшую скорость
чтения/записи  имеют диски с чередованием
0, но иногда бывает нужно его изменять.
= "СМЕЩЕНИЕ" это сдвиг секторов на дорож-
ке  относительно превыдущей на определен-
ное  число  секторов в сторону,противопо-
ложную  вращению  диска. Этим достигается
компенсация временных потерь при шаге го-
ловки с дорожки на дорожку.
=  "ИНТЕРВАЛ"-физическое расстояние между
секторами  на  диске. Программа допускает
установку  интервала 20-80 пробелов (нор-
мально 45-55).
= "ПОВТОРОВ"-возможное число проверок ка-
чества форматирования.
  0  - только форматирование, без провер-
ки;
  1  -  форматирование,  затем проверка с
выводом результата на экран;
  ...
  7  - форматирование, затем проверка и в
зависимости от результата, возможны еще 6
попыток форматирования.
=  "ДОРОЖЕК"-число дорожек которое Вы хо-
тите   отформатировать   на  Вашим  диске
(1-176).  Если Вы установите форматирова-
ние 1 дорожки, программа сделает, так на-
зываемый, "быстрый формат", т.е. отформа-
тирует только TR00 и сформирует системный
сектор, как для диска 2*80.

  Эта программа, в отличие от многих дру-
гих, формирует в начале дорожки индексный
пробел.
   ВНИМАНИЕ ! Если при форматировании на-
жать  клавищу [Break], форматирование бу-
дет  прервано.  Затем,  если ее отпустить
сразу  после короткого звукового сигнала,
произойдет  запись  системного  сектора с
данными соответствующими тому, что Вы ус-
пели отформатировать. (т.е. если отформа-
тировалось только 10 дорожек будет указа-
но, что на диске только 144 сектора!) Ес-
ли Вы хотите просто прервать форматирова-
ние, удерживайте [Break] до тех пор, пока
программа  не  вернется  в основной режим
(1.5 сек).

'Объем файла из Кат./Выч. '-об'ем файла в
секторах, которым оперирует программа при
копировании  и маркировке берется либо из
каталога  (Кат.),  если  каталог  в  этом
смысле заслуживает доверия, либо програм-
ма   сама  вычисляет  об'ем  файла  руко-
водствуясь  при  этом своими собственными
соображениями.
                ________

        Работа программы в режиме
           дискового 'Доктора'

  В  полях редактирования синхронно пере-
мещаются  ДВА  курсора, один по НЕХ-полю,
другой  по символьному. При этом один яв-
ляется ГЛАВНЫМ (мигающий, черного цвета),
другой (серого цвета), как-бы его тень на
другом  поле.  Редактирование  информации
возможно ТОЛЬКО ПОД ГЛАВНЫМ КУРСОРОМ.
  Сектор  при  выводе на экран делится на
две страницы: 0-127 и 128-255 байты.

  Непосредственно выполняемые команды:

*   клавиши  курсора-перемещение  курсора
внутри дорожки (при этом курсор перемеща-
ется  только внутри ТЕКУЩЕЙ дорожки и для
перемещения  на следующую пользуйтесь ко-
мандами "страница вперед" и "страница на-
зад".);
* [Inv.video]-страница вперед(+128 байт);
* [True video]-страница назад(-128 байт);
* [Delete]-восстановление первоначального
значения  байта СЛЕВА от курсора. Восста-
навливается то значение байта, которое он
имел  сразу после чтения дорожки. Восста-
навливается  любое  число байт в пределах
дорожки, любое число раз;
*  [Graphics]-переключение  режима вывода
цифр. информ.- Dec/HEX
* [Caps lock]-переключение регистра ввода
символов- ЗАГЛ./стр;
*  [SS]/[W]-установка/сброс  7-го  бита в
байте под курсором;
*  [SS]/[Q]-установка  главного курсора в
НЕХ поле;
*  [SS]/[E]-установка  главного курсора в
символьное поле;
*  [Enter]-информация о диске и положении
в нем курсора; (нажатие в режиме просмот-
ра  информации  на  [Graphics] приводит к
смене режима вывода информации на экран);
В  Н  И  М А Н И Е: изменения, которые Вы
совершите  в  8 секторе системной дорожки
не  будут  показаны в 'информации' до тех
пор, пока Вы не запишите их на диск!
*  [Edit]-смена диска / дисковода. Отмена
команды клавишами [Break] или [Edit];
*  [SS]/[I]-программа  ищет заданную Вами
последовательность байт от текущего поло-
жения  курсора  до заданной Вами конечной
дорожки.  Перед началом поиска последова-
тельность  выводится  на экран, что-бы Вы
знали, чего собственно ищете. Если после-
довательность не задана - команда игнори-
руется.
  Если  главный  курсор находится в 'HEX'
части  дампа,  то  байты  редактируются в
'HEX' виде (действуют клавиши 0-9 и A-F),
неправильный  ввод первого нибла редакти-
руемого  байта (т.е., если Вы хотели наб-
рать  '8A' и случайно набрали первый сим-
вол [9],то нажав [Delete] можно его отме-
нить. При редактировании в символьном по-
ле производится непосредственное редакти-
рование  символьными клавишами (символами
с кодами 32-126). Ввод байт с кодами от 0
до  31  и от 127 до 255 возможен только в
'HEX' виде.
  Программа  не даст Вам покинуть текущую
дорожку,  если  Вы  редактировали ее и не
записали полученный результат на диск ко-
мандами:  'Записать сектор' или 'Записать
дорожку'.

*   выход   в  режим  дополнительных  ко-
манд - клавиша [Extend mode]

         ДОПОЛНИТЕЛЬНЫЕ КОМАНДЫ:

 [SS]/[A]:возврат в 'Commander';
 [R]:'Считать дорожку'-перезагрузка теку-
щей  дорожки  с диска. При чтении дорожки
программа   пользуется   непосредственным
доступом  к диску, минуя процедуру 15635.
Это дает возможность прочитать информацию
с  дорожки даже при ее частичном разруше-
нии,  но  времени на эту процедуру уходит
от 1.5 сек. и более, в зависимости от ка-
чества  информации  на  диске. Результаты
отражаются в виде строки:
|0|1|2|3|4|5|6|7|8|9|A|B|C|D|E|F
цифры  отражают порядковый номер сектора,
цвет сектора показывает достоверность ин-
формации при чтении:

черная  цифра  на  синем фоне: дорожка не
форматирована

красная  цифра  на  черном фоне: сектор с
таким номером не найден

черная  цифра  на фиолетовом фоне: сектор
восстановлен после прямого чтения дорожки

черная цифра на белом фоне: длина сектора
не равна 256 байт

черная цифра на красном фоне: сектор счи-
тан с ошибкой в CRC

черная  цифра на желтом фоне: сектор счи-
тан не с первого раза

черная  цифра  на  голубом  фоне: нестан-
дартная метка IAM

черная цифра на зеленом фоне: сектор счи-
тан с первого раза (ОК)

  Совсем  не обязательно стараться запом-
нить  все  это.  При  нажатии  на [Enter]
Программа информирует Вас о данных диска,
положении  курсора на диске и, Вы увидите
расшифровку  данных  о качестве прочтения
сектора под курсором.


 [S]:'Записать  дорожку'-записать текущую
дорожку  на диск. После стандартного зап-
роса на подтверждение выполнения команды,
если  ДОКТОР  считает, что обычная запись
на  дорожку  не  приведет к положительным
результатам   (т.е.  при  чтении  дорожки
часть секторов была прочитана с фатальны-
ми ошибками, следует запрос:
 +-----------------+
 |Переформатировать|
 |  дорожку Y/N ?  |
 +-----------------+
при  положительном ответе на который, до-
рожка  перед записью будет отформатирова-
на.  При  этом  для  форматирования будет
выбрано расположение секторов:
 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16
если Вы не выберите форматирование, прог-
рамма  запишет только те сектора, которые
были прочитаны без фатальных ошибок!

 [P]:'Записать  сектор'-записать  текущий
сектор на диск.

 [T]:'Смена  дорожки/сектора'-ввод  новых
значений  дорожки / сектора и перемещение
туда  курсора. По умолчанию остаются пре-
дыдущие  дорожка/сектор.  Если  Вы хотите
использовать  текущую дорожку или сектор,
то  вместо  ввода  числа  нажмите [Edit].
Ввод данных в 'HEX' или 'Dec' виде, в за-
висимости  от  Вашего  желания. Дорожка с
номером  более  175 и номер сектора более
15 не принимаются!

[О]:'Поиск  файла'-на диске ищется файл с
заданным  именем и типом. Курсор устанав-
ливается в первом секторе искомого файла.
Имя и тип файла запоминаются программой !

[G]:'Перейти  на  файл под курсором'-если
курсор  находится на 0 дорожке в секторах
0-7  и располагается над дескриптором ре-
ально  существующего  файла (обычный файл
или  DEL-файл), то происходит перемещение
в  начало  первого  сектора  этого файла.
Последующие  выполнения  этой  команды из
ЛЮБОГО места диска, кроме оговоренных вы-
ше, будут снова перемещать курсор в нача-
ло  этого файла. Если произвести перезаг-
рузку  диска или выйти из Доктора и вновь
вернуться,  команда  'G' будет обнулена и
начнет  игнорироваться при попытке выпол-
нить  ее  находясь вне реального каталога
диска.

[0]:(ноль)  'Перейти  на 0 дорожку 0 сек-
тор'-здесь, я думаю, все и так понятно.

[C]:'Калькулятор'-обыкновенный  калькуля-
тор  для вычислений, с некоторыми необык-
новенными возможностями. Может работать с
числами  с плавающей запятой. Выполняет 5
арифметических действий:
+ сложить
- вычесть
* умножить
/ делить
^ возвести в степень
 Вычисления   производятся  строго  слева
направо  без соблюдения приоритета опера-
ций. Данные могут быть заданы в:

234  5.89562Е+8  -56.55 -десятичном
# (это 0) #A #55 #c002 -шестнадцатиричном
%11101 %1000010001000001 -двоичном
"a"  "F"   -символьном видах
естественно, что шестнадцатиричные и дво-
ичные данные могут быть только в диапазо-
не 0-65535. Запись:
25*-3
означает-умножить 25 на (-3).
 Есть,  так называемый, 'подкалькулятор'.
Если  в  начале  строки поставить '?', то
результат,  если он укладывается в диапа-
зон  0-65535,  будет  выдан в трех видах;
десятичном, шестнадцатиричном и двоичном:
?25+#c0-86 = 131 #83 %10000011 или
?"F" = 70 #46 %01000110
если в результате вычислений подкалькуля-
тора   будет  получен  отрицательный  ре-
зультат  в  диапазоне (-127)-(-1), то его
ШЕСТНАДЦАТИРИЧНОЕ значение будет выдано в
дополнительном  виде  (как  отрицательное
смещение.
 Теперь самая специфическая команда:
56'10   означает: дорожка 56,сектор 10
(можно 56'#A)
если Вы наберете это, то результат будет:
56'#A  =   906  56'10  #38'#0А
где 906, это расстояние в секторах данно-
го  места  на  диске от его начала (дор.0
сект.0).  Например, если начало файла до-
рожка  10 сектор 1 и его длина 129 секто-
ров,  то Вы можете узнать, где начинается
следующий файл:
10'1+129     =   290  18'2  #12'#02
или  зная  начало  некого  файла и начало
следующего  за  ним файла можно вычислить
его длину в секторах:
15'1-10'0    =   81  5'1  #05'#01
здесь  длина файла 81 сектор, а дорожка/-
сектор  не  имеют практического значения,
хотя с другой стороны они показывают дли-
ну файла в дорожках/секторах.

 Для  выхода из Калькулятора нужно нажать
клавишу  [Break],  при  этом, если строка
пуста,  Вы сразу попадаете в основной ре-
жим  Доктора. Если-же в строке что-нибудь
есть, Вас спросят, не хотите-ли Вы запом-
нить  результат вычислений в одной из де-
вяти  ячеек  памяти  М1-М9.  При  нажатии
[1]-[9] число запоминается и Вы возвраща-
етесь в Калькулятор, нажатие любой другой
клавиши  возвращает  Вас в основной режим
Доктора.  Следует отметить, что у Кальку-
лятора  есть  еще  одна ячейка памяти М0.
Она заполняется автоматически, после каж-
дого  вычисления. Использовать содержимое
этих   ячеек   можмо  следующим  образом:
25+15+м0-59-м1 = результат зависит от пе-
ременных М0 и М1.
ВНИМАНИЕ  !  В ячейке памяти можно запом-
нить  ТОЛЬКО число (простое или с плаваю-
щей  запятой). Невозможно запомнить в па-
мяти значение "дорожка/сектор".


[F]:'Поиск'-поиск   на  диске,в  заданных
пределах, последовательности байт. Вы мо-
жете  задавать  данные для поиска в деся-
тичном,  шестнадцатиричном  и  символьном
видах.  Знак '.' (точка) означает возмож-
ность  присутствия  на  этом месте любого
байта.  В  символьном  виде можно задать,
как одиночный байт:
"F"
так и стринг:
"Game is over"

 Символьная  информация ДОЛЖНА быть огра-
ничена кавычками!

 В  шестнадцатиричном виде может быть за-
дан, как одиночный байт:
          #77   #C3   #c3   #A
так и адрес:
      #C000   #c000   #A76   #0056
         (#c3 #0056   =  JP #56)
т.е.  если  Вы  набираете  #C3 #C033, это
значит,  что на диске будет искаться пос-
ледовательность байт #C3 #33 #C0. В деся-
тичном  виде также можно задать одиночный
байт  (0-255) или адрес (0-65535), причем
адрес,  если  он меньше 255, должен начи-
наться с нуля:
 #c3 49152 = JP 49152    #c3 056 = JP 56
 НО! #c3 56 -может дать самый неожиданный
результат, если Вы имели ввиду адрес 56!
 Вы также имеете возможность использовать
'свободную  маску', поставив вместо зада-
ваемого байта точку:
               #22 . . 40
здесь  программа  будет искать байты 34 и
40  между которыми могут находиться любые
2 байта!

 Теперь  о корректности ввода данных. Же-
лательно, но не обязательно, отделять ис-
комые данные друг от друга пробелами:
#c3 49150 16 7 17 0 19 1 "Disk Error"    или
#20 #20 #20 . . . . . "over"
 более  компактный  вариант  (но не более
желательный, во избежание ошибок ):
#c3 49152 16 7 17 0 19 1"Disk Error"     или
#20#20#20....."over"

 После ввода последовательности и возмож-
ного  редактирования  нажмите  [Enter]  и
введите сначала начальную дорожку для по-
иска (включительно) (если Вы вместо ввода
числа  нажмете [Edit], то будет использо-
ван  текущий  номер дорожки). После этого
введите  конечную  дорожку  (тоже включи-
тельно)  (здесь  при нажатии [Edit] будет
введена последняя занятая дорожка диска),
ну а затем начнется собственно поиск. Ес-
ли ничего не будет обнаружено, то выдает-
ся  соответствующее сообщение и программа
вернется  на  те дорожку/сектор с которых
ПОСЛЕДНИЙ  РАЗ  начинался поиск. Заданную
Вами последовательность программа запоми-
нает и при следующем входе в команду, ес-
ли прошлые данные не нужны, придется сна-
чала  почистить  строку  командой  [Grap-
hics].


[I]:'индексные  данные текущей дорожки'-в
правом верхнем углу показывается физичес-
кие  N цилиндра и N стороны диска, далее,
в  столбик,  данные  заголовков  секторов
этой дорожки, начиная от индексной метки:
лог.N  цилиндра  лог.N  стороны N сектора
его длина.
При  нажатии на клавишу [Graphics], можно
сменить  режим вывода информации на экран
- HEX/Dec.

[D]:'Дизассемблировать   код'-начиная  от
текущего  положения курсора, на экран вы-
водиться листинг дизассемблирования.
 При  выполнении, в заголовке указывается
имя  файла и программа запрашивает, какое
реальное  положение занимает в ОЗУ дизас-
семблируемый код. В качестве своего вари-
анта программа предлагает: для BASIC-фай-
лов:'23867'+'расстояние от курсора до на-
чала файла, для других типов файла:'адрес
загрузки'+'расстояние  от  ...'  и,  если
курсор  располагается на ТR00 или за пре-
делами     занятой     области,    диска:
'0'+'расстояние  от ...'. Ввод информации
возможен  в HEX или десятичном видах, на-
жатие  на [Edit] возвращает вариант прог-
раммы.
 Листинг  выдается  построчно при нажатии
на любую клавишу, кроме [BREAK] или [M].
 Дизассемблируются ВСЕ(?) команды процес-
сора Z80 фирмы Zilog.
 Справа  от команд выдается их значение в
HEX-виде  желтого  цвета,  если  все нор-
мально  и красного цвета, если нахождение
данного байта в данном месте бессмысленно
(как  считает  программа,  а с ней иногда
можно поспорить (правда это бестолку).
 Цифровая информация выводиться в HEX или
Dec-виде,  в зависимости от соответствую-
щего  состояния 'Доктора' (установленного
клавишей [Graphics]).
ДОПОЛНИТЕЛЬНЫЕ КОМАНДЫ функции 'D':
[BREAK]-прерывает вывод листинга.
[М]-устанавливает  курсор  в 'Докторе' на
байт начала последней команды на экране.

[B]:'просмотр  BASIC файла'-функция пред-
назначена  для  облегчения работы с BASIC
программами.  Действует  только  в файлах
типа 'В' (BASIC файлах)!
 При  выполнении, в заголовке указывается
имя файла и, справа от него, номер строки
автостарта  программы,  если он, конечно,
есть.  При  выдаче на экран листинга, уп-
равляющие символы игнорируются. При обна-
ружении   в  строке  недопустимых  в  BA-
SIC-программах  символов листинг прерыва-
ется  с выдачей сообщения "Конец програм-
мы".  При  обнаружении  таких  символов в
строкe после REM, на экран выводиться не-
которое число байт в символьном виде, фи-
олетового  цвета (в виде символа в диапа-
зоне 32-127 или как '.', если значение не
попадает  в этот диапазон) и листинг про-
должается  со следующей строки программы.
Листинг  выводится построчно. Выдача сле-
дующей строки происходит по нажатию любой
клавиши  кроме:  [BREAK], [M] или [S]. По
окончании программы дается сообщение "Ко-
нец  программы Y/N ?", возврат в основной
режим  'Доктора' происходит после нажатия
[Y].
ДОПОЛНИТЕЛЬНЫЕ КОМАНДЫ функции 'В':
[BREAK]-прерывает вывод листинга.
[S]-устанавливает  курсор  в 'Докторе' на
младший  байт автостарта программы в слу-
жебной  области  файла,  что дает возмож-
ность  изменить  его  при  желании. Номер
строки автостарта программы представляет-
ся  в  двухбайтовом  виде мл./ст. При ра-
венстве  его  нулю, автостарт с программы
снимается.
[М]-устанавливает  курсор  в 'Докторе' на
первый  оператор в последней, выданной на
экран, строке листинга. КАЖДОЕ нажатие на
[М] переориентирует курсор по новому!

+---------------------------------------+
|   Юрий Ковалевский   'CONVER-Utility' |
|   31.05.96           г.Санкт-Петербург|
+---------------------------------------+