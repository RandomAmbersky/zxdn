Из журнала ZX Format #5,
Санкт-Петербург, 12.12.1996



Рубрика "IS-DOS - пользователям" No 5.
________________________________________

    Здравствуйте,  уважаемые   читатели.
Сегодня в рубрике "IS-DOS -  пользовате-
лям" мы начинаем публикацию  журнального
варианта новой книги, которая в  настоя-
щий момент готовится к выпуску  в  фирме
Искрасофт. Мы еще не знаем, какой  будет
эта книга, выйдет ли она в полиграфичес-
ком варианте, или же в  виде  справочной
системы на диске,  или  еще  как-нибудь.
Пока же мы  предлагаем  вашему  вниманию
несколько первых глав из нее и надеемся,
что они вас заинтересуют. Если вы,  ува-
жаемые читатели, сочтете  эти  материалы
интересными и достойными  опубликования,
то в следующих номерах журнала  мы  про-
должим наш разговор.

    С уважением, отдел IS-DOS.

****************************************

     Елисеев В. А., Леонтьев А. Г.

    СПРАВОЧНИК ПО ОСНОВНЫМ КОМАНДАМ И
   УТИЛИТАМ БАЗОВОГО КОМПЛЕКТА IS-DOS.

                ВВЕДЕНИЕ.

    Данный справочник составлен на осно-
ве  help-файлов    базового    комплекта
IS-DOS, написанных, в  основном,  А.  Г.
Леонтьевым за годы существования  систе-
мы с 1992 по 1996  включительно.  Исход-
ные тексты были значительно  переработа-
ны специально для этого  справочника  В.
А. Елисеевым, главным образом, для  при-
дания им  большей  удобочитаемости,  ис-
правления ошибок и толкования  некоторых
фрагментов текстов,  непонятных  широким
массам пользователей.

    Эта книга не повторяет широко извес-
тное издание московской фирмы "Слот",  а
представляет собой  скорее  альтернативу
этой когда-то  "нужной  и  своевременной
книге", ныне,  к  сожалению,  безнадежно
устаревшей.

    Описания команд и утилит IS-DOS при-
водятся в книге  в  алфавитном  порядке.
Отдельно  рассматриваются    резидентные
программы и их com-овские  аналоги,  вы-
полняющие те же функции, программа печа-
ти, текстовый редактор,  перекодировщики
файлов, драйверы устройств.  Для  каждой
программы  в  заголовке  соответствующей
статьи указывается дата последней редак-
ции файла (на момент написания книги)  и
имя каталога, в котором она находится.

    Итак, начнем по порядку:

     1. ОСНОВНЫЕ КОМАНДЫ И УТИЛИТЫ

Буква <А>:

***************************************
abba.com     19.07.93  UTIL
acca.com     17.07.93  UTIL
adbc.com     24.05.93  UTIL
Поблочное копирование
---------------------------------------

    Базовая программа abba.com и ее  мо-
дификации acca.com и adbc.com предназна-
чены для  быстрого  дублирования  дисков
IS-DOS на двух дисководах.  Они  осущес-
твляют так называемое "поблочное"  копи-
рование, при котором выходной (на  кото-
рый Вы хотите копировать) диск по  своей
логической структуре  полностью  иденти-
чен входному  (с  которого  производится
копирование).

    Такой способ копирования весьма удо-
бен для  начинающих  пользователей,  так
как позволяет создать рабочую копию  лю-
бого IS-DOS'овского диска,  не  заботясь
ни о его содержании,  ни  о  подключении
системных файлов и  создании  системного
загрузчика.

    Три варианта программы работают  со-
вершенно одинаково и различаются  только
выбором выходного дисковода.  Каждая  из
этих программ работает  с  определенными
парами устройств, при этом выходной дис-
ковод выбирается автоматически, в  зави-
симости от варианта  программы.

    Программа  abba.com  копирует  диск,
находящийся в открытом на текущей  пане-
ли устройстве (на текущей  панели  может
быть открыт любой каталог  этого  диска)
на диск, находящийся  в  "соседнем"  ус-
тройстве, т. е. пары образуются  следую-
щие:

          с A на B, с B на A,
          с C на D, с D на C
               и т. д.

    Программа  acca.com  копирует  диск,
находящийся в открытом на текущей  пане-
ли устройстве на диск, находящийся  "че-
рез одно" устройство, т.  е.  образуемые
пары будут такими:

          с A на C, с C на A,
          с B на D, с D на B
               и т. д.

    Программа adbc.com  отличается  тем,
что работает со  следующими  парами  ус-
тройств:

          с A на D, с D на A,
          с B на C, с C на B
               и т. д.

    Все возможные сочетания приводятся в
табл. 1

****************************************
Таблица 1. Применение поблочных копиров-
           щиков.
****************************************
abba.com AB BA CD DC EF FE GH HG
acca.com AC CA BD DB EG GE FH HF
adbc.com AD DA BC CB EH HE FG GF
****************************************

    Таким образом, для выполнения  копи-
рования Вам необходимо открыть на  теку-
щей панели входное устройство, выбрать и
запустить один из копировщиков, в  зави-
симости от того,  какие  устройства  Вам
нужны, вставить  во  входное  устройство
диск-источник, а в выходное -  предвари-
тельно   отформатированный    программой
format.com диск-приемник.

    Запуск  копировщиков  удобнее  всего
производить по "горячей клавише",  пред-
варительно описанной в  текстовом  файле
extkey.txt (о том, как это  сделать  чи-
тайте в книге В. А. Елисеева  "IS-DOS  -
Первое  знакомство").  Обычно   наиболее
часто используемый  копировщик  abba.com
присоединяется к клавише  "w",  а  более
редко встречающийся acca.com - к  клави-
ше "W". Также можно запускать их из  мо-
нитора командной строки, например:

     Q:UTIL\abba

    Управление  программами  чрезвычайно
просто - после запуска на экране  возни-
кает окно следующего вида:

    +--------------------------+
    |Copy all from <N1> to <N2>|
    |<Y> or <Enter> to continue|
    |<N> <Space> <SS/A> to quit|
    +--------------------------+

где  N1  и  N2 - соответственно,    сим-
вольные имена входного и  выходного  ус-
тройств.

    Следуя этим указаниям Вы можете  на-
жать клавиши Y или ENTER,  чтобы  выпол-
нить копирование, или нажать клавиши  N,
SS+A, SPACE, чтобы отказаться от копиро-
вания и выйти из программы.

    ВНИМАНИЕ! Программы не проверяют на-
    личие созданного ранее устройства на
    выходном диске, поэтому, если до на-
    чала копирования там была  какая-ни-
    будь информация, вся она будет утра-
    чена.

    Процесс копирования  отображается  в
нижней части экрана при  помощи  бегущей
полосы. При работе программы  копируется
содержимое всего диска, исключая  только
непрерывное  свободное  пространство   в
конце. Максимальное время  работы  зави-
сит от размера занятой области на  диске
и составляет 2.5 - 3 минуты.  Входной  и
выходной  диски  должны  соответствовать
друг другу по количеству сторон и  доро-
жек.

    Программы поблочного копирования мо-
гут работать не только с дисководами, но
и с любыми другими блочными  устройства-
ми  (например,  электронным  диском  или
винчестером). Необходимо только помнить,
что эти программы переписывают без изме-
нений всю информацию  диска,  включая  и
содержимое  системной  дорожки,  поэтому
если выходное устройство  отличается  по
количеству блоков от входного,  возможны
различные неувязки в связи  с  тем,  что
значение размера будет прямо  переписано
с диска-источника.

    Например:

входное устройство A:
    IS-DOS  диск 800K 3200 блоков
выходное устройство C:
    Электронный диск PROFI 3500 блоков

в  результате    применения    программы
acca.com размер электронного диска  ста-
нет равен 3200 блоков,  что  приведет  к
потере 75 килобайт памяти. При копирова-
нии с дискеты  на  винчестер  результаты
могут быть еще более печальными.

    Настройка цветов  выполняется  прог-
раммой unicolor.com

               --------

***************************************
arzt.com     28.08.95  UTIL
Проверка файловой структуры диска
---------------------------------------

    Программа arzt.com предназначена для
проверки и автоматической коррекции фай-
ловой структуры дисковых устройств.  Она
проверяет информацию о  размещении  фай-
лов, содержащуюся в их описателях (в ка-
талоге) и в так называемой "карте  заня-
тости диска"  и  позволяет  диагностиро-
вать различные ошибки размещения файлов,
как-то: "потерянные" блоки,  пересечения
файлов и т. д. Большинство ошибок, пред-
полагающих однозначные решения,  исправ-
ляются автоматически.

    Программа arzt.com может быть весьма
полезна при работе с дисками, переживши-
ми сбои при записи, содержащими "сломан-
ные" файлы и т. п. Кроме того, ее приме-
нение необходимо после удаления файлов и
каталогов утилитой remote.com (см.)

    Программа может запускаться как  не-
посредственно (нажатием ENTER  на  имени
программы), так и из  командной  строки,
или по "горячей клавише". В базовом ком-
плекте IS-DOS эта программа  присоедине-
на к клавише "z".

    После запуска  программы  на  экране
появляется окно меню следующего содержа-
ния:
              +---------+
              |DISKNAME |
              |Device: N|
              |Start    |
              |Repeat   |
              |Write BM |
              |blk: 3200|
              +---------+

где DISKNAME - имя (метка) текущего  ус-
тройства N - символьное имя текущего ус-
тройства

    Для того, чтобы выбрать  другое  ус-
тройство, Вам достаточно установить кур-
сор на строчку "Device", нажать ENTER  и
ввести символьное имя  необходимого  ус-
тройства (буквы от A до H). При  этом  в
предыдущей строке будет  выведена  метка
диска.

    Для начала  работы  необходимо  выб-
рать опцию Start. При этом программа на-
чинает  сканировать  файловую  структуру
диска, показывая в верхней части  экрана
два окна. В самом верхнем выводится путь
к проверяемому в данный момент каталогу,
а чуть пониже - номер и имя  проверяемо-
го в данный момент файла или каталога.

    Если файловая структура диска в  по-
рядке, программа завершает свою  работу,
сообщая напоследок в специальном окне  в
нижней части экрана номер последнего за-
нятого блока и имя файла, которому  этот
блок принадлежит. Вы  можете  остановить
работу программы на определенном  блоке,
задав его номер в строке меню "blk"; для
этого установите на этой строке  курсор,
нажмите ENTER, введите  значение  номера
блока и нажмите ENTER еще раз.

    Если программа обнаруживает  несоот-
ветствие файловой структуры диска  карте
занятости блоков этого устройства, а так
же при достижении блока с номером,  ука-
занным в строке "blk", программа  приос-
танавливает работу с выводом сообщения в
окне в правом  верхнем  углу  экрана.  В
этом окне три строки. Их содержание  за-
висит от ситуации.  В  первой  выводится
имя и тип  файла,  которому  принадлежит
найденный блок. Если найденный  блок  не
принадлежит ни к одному файлу, имя,  ес-
тественно, не выводится.

    Во второй строке  выводится  сообще-
ние о ситуации. Возможны  следующие  ва-
рианты:

LOOKED - найденный блок принадлежит фай-
лу,  имя  которого  показано  в  верхней
строке этого окна.

LOST - "потерянный"  блок,  данный  блок
принадлежит файлу, имя которого  показа-
но в верхней строке, однако в карте  за-
нятости блоков он значится как свободный.

CROSSING - блок принадлежит двум  файлам
одновременно. При выводе такого  сообще-
ния в верхней строке окна  показано  имя
второго из этих файлов. Имя первого фай-
ла можно узнать,  если  запустить  Start
еще раз, указав в строке blk номер  най-
денного блока. Программа остановится при
нахождении первого же упоминания об этом
блоке  и  выведет  имя  соответствующего
файла.

FOUND - блок не принадлежит ни к  одному
из файлов,  однако,  в  карте  занятости
блоков он значится как занятый.

WRONG NAME - неправильное имя файла  или
каталога, эта ситуация возникает при на-
личии ошибок в описателях файлов или ка-
талогов.

    Одновременно с выводом этих  сообще-
ний выводится окно со статистической ин-
формацией о текущем  количестве  "непра-
вильных" блоков по трем основным  ситуа-
циям - Lost, Cross и Found.

    Для  продолжения  работы   программы
после такой остановки необходимо  нажать
любую клавишу. При этом работа  програм-
мы будет продолжена до  следующей  оста-
новки. Если Вы не хотите, чтобы програм-
ма останавливалась при обнаружении  оши-
бок в файловой структуре,  а  продолжала
собирать  информацию  автоматически,  Вы
можете после остановки нажать  CS+ENTER.
Если же Вы не хотите продолжать сканиро-
вание - нажмите SS+A, и Вы  вернетесь  в
главное меню программы.

    По окончании сканирования,  как  уже
было сказано выше, выводится номер  пос-
леднего занятого блока и имя файла,  ко-
торому принадлежит этот блок. Кроме  то-
го, в окне статистики сохраняется инфор-
мация об общем количестве найденных оши-
бок по каждой из трех основных ситуаций.

    После завершения сканирования Вы мо-
жете еще раз просмотреть  все  возникшие
ошибочные  ситуации  при  помощи   опции
"Repeat". Каждое нажатие ENTER  на  этой
строке вызывает информацию  о  следующей
ошибке. Нажатие CS+ENTER  вызывает  быс-
трую "прокрутку" информации без  остано-
вок.

    Ошибки типа LOST и FOUND могут  быть
исправлены  программой   самостоятельно.
Для этого служит опция "Write  BM".  Она
приводит карту занятости блоков диска  в
соответствие с информацией,  содержащей-
ся  в  описателях  файлов.  Ошибки  типа
CROSSING требуют логического  осмысления
и не могут быть исправлены  автоматичес-
ки.  Более  того,  исправление  подобных
ошибок -  работа  достаточно  сложная  и
неблагодарная, поэтому  в  таком  случае
лучшим выходом будет удалить оба файла и
заменить их резервными копиями с  друго-
го диска.

    Программа arzt.com сохраняет в памя-
ти данные  по  последнему  обработанному
диску до тех пор, пока Вы не выйдете  из
нее, не запустите "Start" на другом  ус-
тройстве или не выполните  опцию  "Write
BM". Если Вам понадобится  просто  сбро-
сить эту информацию - нажмите  ENTER  на
самой верхней строке с меткой-именем те-
кущего диска.

    Опции "Repeat" и  "Write  BM"  рабо-
тают только после нахождения ошибок, ес-
ли информации об ошибках  отсутствует  -
курсор будет просто "перепрыгивать"  че-
рез эти строки.

    Для выхода из  программы  можно  ис-
пользовать стандартную комбинацию  SS+A,
чтобы выйти в корневой каталог и  клави-
шу SPACE, чтобы выйти в тот каталог, ко-
торый был на текущей панели в момент за-
пуска программы arzt.com.

    Настройка цветов  выполняется  прог-
раммой unicolor.com

               -------

****************************************
arzt+.com    03.01.96  UTIL
Проверка файловой структуры
и уплотнение диска
----------------------------------------

    Программа arzt+.com представляет со-
бой модернизированный вариант  программы
arzt.com. В этой версии программы появи-
лась новая опция - SQUEEZE.  Она  запол-
няет все свободные  участки  в  середине
диска за счет перемещения  туда  следую-
щих файлов. В результате этого все  сво-
бодное пространство на диске  становится
непрерывным.

    В связи с этим несколько  изменилось
меню программы:

              +---------+
              |DISKNAME |
              |Device: N|
              |VERIFY   |
              |Repeat   |
              |Write BM |
              |SQUEEZE  |
              |blk: 3200|
              +---------+

    Опция VERIFY - выполняет ту же  опе-
рацию, что и arzt.com, а именно - прове-
ряет  файловую  структуру  диска.  Опция
SQUEEZE - запускает  процедуру  уплотне-
ния, остальные строки остались без изме-
нений, с их работой Вы  уже  знакомы  по
описанию arzt.com.

    Еще одно небольшое отличие: програм-
ма arzt+.com  не  выводит  по  окончании
сканирования номер  последнего  занятого
блока и имя файла, а вместо  этого  под-
считывает  количество   сегментированных
файлов на диске и общее число  сегментов
в них, выводя эту  информацию  в  нижней
строке экрана.

    Теперь  рассмотрим  более   подробно
процесс уплотнения диска.

    Для начала - несколько важных  заме-
чаний и полезных советов, которые  лучше
прочитать до начала работы с программой:

1. Опция SQUEEZE работает на любых блоч-
ных устройствах IS-DOS при условии,  что
их размер не превышает 1 Мб  (4096  бло-
ков), поэтому ее применение на винчесте-
рах более чем проблематично.

2. Очень важно, чтобы на диске  не  было
сбойных или плохо читаемых секторов  да-
же если они помечены как  сбойные  прог-
раммой bad.com (см.) Это связано с  тем,
что программа  может  переместить  файлы
*.bad в другое место в числе прочих, что
может привести к непредсказуемым послед-
ствиям,  в   частности    к    появлению
Crossing'ов и потере информации. Если Вы
не уверены в  100-процентной  надежности
Вашего диска, рекомендуется перед  нача-
лом уплотнения обработать  его  програм-
мой doctor.com (см.) в режиме Restore.

3. Еще раз предупреждаем - не  уплотняй-
те диски, содержащие файлы  типа  *.bad.
Это может вызвать порчу файлов  и  труд-
ноустранимые  ошибки.  Лучше  перепишите
информацию с этих дисков на новые (прог-
раммами coca.com (см.) или  filecopy.com
(см.)), тогда, впрочем, и уплотнение  им
не понадобится.

    Для большей надежности  перед  нача-
лом работы сосчитайте контрольные  суммы
всех файлов. Сделать это можно при помо-
щи  небольшого  bat-файла  и    программ
scan.res (см.), calc.res (см.) и set.com
(см.):

----------------------------------------
calc.bat
----------------------------------------
;Командный файл для подсчета
;контрольных сумм всех файлов
;на диске. Запускать из корневого
;каталога диска.

Q:RES\set Q:RES\calc.res /r
Q:RES\set Q:RES\scan.res
@scan calc *.*
Q:RES\set Q:RES\scan.res /e
----------------------------------------

    После уплотнения Вы  сможете  прове-
рить контрольные суммы файлов при  помо-
щи программ  ch.res  (см.),  scan.res  и
set.com, составив и  запустив  следующий
bat-файл:

----------------------------------------
ch.bat
----------------------------------------
;Командный файл для проверки
;контрольных сумм всех файлов на диске,
;запускать из корневого каталога.

Q:RES\set Q:RES\ch.res
Q:RES\set Q:RES\scan.res
@scan ch *.*
Q:RES\set Q:RES\ch.res /e
Q:RES\set Q:RES\scan.res /e
----------------------------------------

    К сожалению, даже такой контроль  не
дает полной гарантии,  так  как  подсчет
контрольной суммы не спасает от  случай-
ной  перестановки  нескольких  байт  или
блоков внутри файла (помните, "...от пе-
ремены мест слагаемых..."), так что чуч-
ше все-таки не пытайтесь уплотнять  пло-
хие  диски,  а  лучше  вообще  ими    не
пользуйтесь - меньше будет проблем.

4. При большом количестве сегментирован-
ных файлов на устройстве  программе  мо-
жет не хватить памяти для сбора информа-
ции о диске, поэтому перед  запуском  ее
желательно снять  ненужные  резиденты  и
драйверы.  Это  удобнее  всего   сделать
программой  eliminat.com  (см.).  Решать
проблему нехватки памяти уменьшением кэ-
ша не рекомендуется, так  как  arzt+.com
достаточно  интенсивно  его  использует.
Если памяти все равно не хватает -  мож-
но порекомендовать уменьшить  количество
сегментированных файлов  на  устройстве,
это будет весьма полезно  и  для  работы
системы в целом, так как  немного  уско-
рит работу с диском.

    Определить наличие  сегментированных
файлов  Вам  поможет  системная  утилита
"mask.com", вызываемая по  клавише  "0".
Если в третьей строке меню ее выбрать не
LENGTH, а STATUS,  то  справа  от  имени
каждого непрерывного файла в панелях бу-
дет стоять символ "с", а  у  сегментиро-
ванных файлов такой метки не будет.

    Уменьшить  число    сегментированных
файлов на диске можно при  помощи  рези-
дентной программы contig.res (см.).  Эта
программа  преобразует  сегментированные
файлы, состоящие из  одного  (не  более)
сегмента  в  непрерывные.  Запускать  ее
лучше из bat-файла следующим образом:

----------------------------------------
contig.bat
----------------------------------------
;командный файл для преобразования всех
;односегментных файлов в непрерывные
;запускать из корневого каталога

Q:RES\set Q:RES\scan.res
Q:RES\set Q:RES\contig.res
@scan contig *.*
Q:RES\set Q:RES\contig.res
Q:RES\set Q:RES\scan.res
----------------------------------------

    Программа сама  находит  сегментиро-
ванный файл на диске, обрабатывает его и
выводит сообщение "Победа: <имя  файла>"
если файл удалось преобразовать в непре-
рывный. В противном случае программа вы-
водит сообщение "Увы и ах: <имя  файла>"
и оставляет его как есть. Для таких фай-
лов (как правило, они  состоят  из  нес-
кольких сегментов) можно применить  дру-
гой способ: пометить их и вызвать из ко-
мандной строки скопировать их в  тот  же
каталог при помощи програмы filecopy.com
с ключом /c. При копировании не забудьте
выбрать режим overwrite.

5. При работе с дисками  IS-DOS  Classic
программа arzt+.com сама следит за поло-
жением системного файла и, по  окончании
работы, сама подключает его заново.  При
работе  c  загрузочными  дисками  IS-DOS
Chic систему после уплотнения  необходи-
мо будет  подключить  заново,  используя
командный файл connect.bat:

----------------------------------------
connect.bat
----------------------------------------
;командный файл для подключения
;системы IS-DOS Chic
;запускать из каталога SERVICE
;диск с подключаемой системой должен
;быть назначен текущим (T:)

con scor_dos.sys
bootsc T: T:\SERVICE\scor_dos.rom
----------------------------------------

6. Если у Вашего компьютера 1Мб  памяти,
Вы  можете  воспользоваться   уникальной
возможностью значительно ускорить  рабо-
ту программы за  счет  применения  элек-
тронного диска. Сделайте  копию  дискеты
на  RAM-диск  программой  acca.com   или
adbc.com, запустите на электронном  дис-
ке arzt+.com и после  завершения  работы
скопируйте содержимое электронного  дис-
ка  на  дискету  теми  же    программами
acca.com или adbc.com.

    Теперь, наконец, поговорим об уплот-
нении диска. Оно производится в два эта-
па. Первый - проверка  структуры  диска,
второй  -  собственно  уплотнение.  Весь
процесс занимает 7 - 9 минут на  обычной
дискете, причем время работы зависит  от
состояния диска - чем меньше на нем сег-
ментированных файлов, "дырок" и  т.  п.,
тем быстрее будет работать программа.

    После первого этапа на  экран  выво-
дится карта занятости блоков  диска,  на
которой специальными значками  обозначе-
ны:

"щ" - свободная область
"X" - частично заполненная область
"*" - занятая область
"@" - необработанная область, на  анализ
      которой не хватило памяти.

    Во время второго этапа работы  прог-
раммы на  этой  карте  будет  оперативно
отображаться процесс  уплотнения  диска.
Необработанная область  при  этом  (если
она,  конечно,  имеется) уплотняться  не
будет.

    Во время  работы  программа  активно
использует кэш,  поэтому  уменьшать  его
перед запуском arzt+.com не рекомендует-
ся. Кроме того, под кэшем должно быть не
менее 6Кб свободной  памяти,  иначе  она
будет работать медленнее, а то и  просто
откажется работать и  выведет  сообщение
об ошибке Error 130 (нехватка памяти).

    По окончании работы  программа  воз-
вращается в основное меню,  из  которого
можно выйти в оболочку так же, как и  из
arzt.com - клавиши SS+A - выход в корне-
вой каталог диска, SPACE - выход в теку-
щий каталог.

    Настройка цветов  выполняется  прог-
раммой unicolor.com

                -------

****************************************

    Ну вот, для начала и все.  Ждем  Ва-
ших отзывов,  уважаемые  читатели.  Если
Вас заинтересовала эта публикация  и  Вы
считаете, что издание такой книги -  де-
ло полезное и нужное, а также если у Вас
возникнут вопросы и пожелания -  звоните
нам по телефону:

(812) 245-90-11 с 11.00 до 14.00
      спросить Программный отдел

или пишите по адресу:

194100 Санкт-Петербург, Лесной пр. 65,
       корп. 1, фирма "Искрасофт",
       Программный отдел.
________________________________________





Из журнала ZX Format #6,
Санкт-Петербург, 30.07.1997



  Рубрика "IS-DOS - пользователям" No.6

                 Часть 2

(C) В.Елисеев
_________________________________________

     В этой статье речь пойдет о том, как
выполнить индивидуальную настройку систе-
мы  IS-DOS  на  конкретную   модель    ZX
Spectrum-совместимого компьютера и на вы-
полнение Ваших задач.

     Так уж сложилось,  что единой модели
компьютера ZX Spectrum в нашей стране  не
существовало никогда,  да и не существует
до сих пор.  Даже процесс  жесткого  "ес-
тественного отбора" в условиях так  назы-
ваемой "рыночной экономики" не помог  вы-
работать хотя бы некоторое подобие  стан-
дарта на Спектрумовское "железо",  выпус-
каемое на сегодняшний день, не говоря уже
о парке машин,  находящихся в пользовании
уже несколько лет.
     К всеобщему сожалению, огромное раз-
нообразие  моделей   Spectrum-совместимых
компьютеров в нашей стране вызывает  зна-
чительные трудности при  написании  прог-
раммного обеспечения.   Ведь  практически
для каждого компьютера приходится предус-
матривать его конструктивные  особенности
внутри прикладной программы, так как сис-
темные драйверы в стандартной  операцион-
ной системе ZX Spectrum использовать  не-
возможно.
     Система IS-DOS частично  решает  эту
серьезную проблему для  своих  прикладных
программ. Все программы IS-DOS пользуются
стандартными точками входа для  работы  с
периферийными устройствами,  как внешними
(например,  принтер),  так и  внутренними
(клавиатура,    дисплей,      расширенная
память), поэтому стало возможным все раз-
личия между моделями "привести  к  общему
знаменателю"  при  помощи  драйверов  ус-
тройств.
     Совокупность всех этих драйверов, их
настроек,  а также некоторых  резидентных
программ и составляет индивидуальную нас-
тройку системы. Итак, по порядку:

     I. Выбор раскладки клавиатуры.

     На сегодняшний день  существует  три
наиболее  часто  встречающихся   варианта
раскладки русских символов на  клавиатуре
ZX Spectrum:

"яверты" - наиболее старый вариант, удоб-
ный для клавиатур, на которых нет изобра-
жений  русских  символов,      так    как
большинство  русских  букв  находится  на
клавишах с похожими по начертанию  латин-
скими буквами, в настоящее время считает-
ся морально устаревшим и не рекомендуется
к повседневному употреблению.

"йцукен" -  более  современный  стандарт,
наиболее  всего  похожий  на  стандартную
раскладку,    применяемую  в   профессио-
нальных компьютерах и машинописи.   Из-за
малого количества клавиш у  ZX  Spectrum,
некоторые редко используемые буквы (б, ж,
х,  э,  ю,  ъ) располагаются не на  своих
обычных местах,  а на цифровых клавишах и
вызываются нажатием SS+цифра (вместо сим-
волов !  @ # $  и  т.    д.    в  русском
регистре),  что создает некоторые неудоб-
ства. Преодолеть это можно,  подключив  к
Спекки клавиатуру от IBM PC XT при помощи
специального контроллера,  выпускаемого в
настоящее время фирмой Nemo. К этому кон-
троллеру выпускается специальный драйвер,
в котором ВСЕ русские буквы (как большие,
так и малые) находятся на своих местах.

"цукенг" - своеобразный "курьез природы",
результат головотяпства изготовителей по-
пулярной 58-клавишной пленочной клавиату-
ры, на которой верхний ряд русских симво-
лов смещен на один символ влево.  Клавиа-
тур этих оказалось  выпущено  так  много,
что  проще  всего  было  написать    спе-
циальный драйвер, что и было сделано.

     Драйвер клавиатуры  tt_x+.key  умеет
обслуживать все эти три стандарта,    для
выбора того или иного из  них  необходимо
только подставить  соответствующую  кодо-
вую таблицу,  входящую в комплект постав-
ки драйвера.
     Все файлы,  относящиеся  к  драйверу
клавиатуры,    располагаются  в  каталоге
\RES\KEY\ базового комплекта IS-DOS.

          Вот основные из них:

tt_x+.key    - собственно,  драйвер. Этот
               файл редко  бывает необхо-
               дим, так как  этот драйвер
               устанавливается  в систему
               по умолчанию.

x+_йцуке.tab - кодовая таблица  для стан-
               дарта "йцукен"
x+_цукен.tab - то же  для  "неправильной"
               клавиатуры
x+_яверт.tab - то же для старого стандар-
               та "яверты"
x+_kay.tab   - "полная"  русифицированная
               таблица  для   контроллера
               клавиатуры от IBM  PC  XT,
               изготавливаемой ф. Nemo.

x+_*.bat     - командные  файлы  для под-
               становки   соответствующих
               кодовых таблиц драйверу.

ktest.com    - программа-индикатор   кода
               нажатой клавиши.

menu.mnu     - файл USER MENU,  позволяю-
               щий  выбрать  ту  или иную
               кодовую таблицу.

     Конечно,  Вы можете каждый раз после
загрузки системы вызывать это меню,  что-
бы установить нужную Вам раскладку,    но
согласитесь,  что это  быстро  надоедает.
Избежать этой утомительной процедуры мож-
но, опять же, несколькими способами.
     Первый,  самый простой способ - впи-
сать содержимое соответствующего bat-фай-
ла в autoexec.bat,  или,  что еще  проще,
вписать в  тот  же  autoexec.bat  строчку
следующего вида:

Q:\SHELL\exebat Q:\RES\KEY\x+_*.bat

где вместо "*"  должна  быть  необходимая
часть имени (йцуке, яверт и т. п.).
     Но,  как это часто  бывает,    самый
простой путь - далеко не  самый  короткий
(или я что-то не так сказал, ну да ладно)

     В самом деле,  совсем не обязательно
каждый раз переставлять  кодовую  таблицу
драйвера, достаточно сделать это один раз
и  закрепить  произведенные  изменения  в
файле системы.

          Для этого необходимо:

1. Загрузить IS-DOS и  выбрать  требуемую
раскладку русских символов, запустив один
из bat-файлов (x+_*.bat)

2. Выйти в каталог \SERVICE\, вызвать мо-
нитор  командной  строки  (клавиша  "M"),
набрать:

sv is

и нажать ENTER.  В результате этого  файл
системы is_dos.sys будет заново  сохранен
на диске с необходимыми изменениями.

3. Запустить командный  файл  connect.bat
или набрать в мониторе  командной  строки
последовательно команды:

con is
boot

     После этого на Вашем диске по  умол-
чанию будет всегда установлена  выбранная
Вами раскладка.

          Небольшое дополнение.

     Если Вас по  какой-либо  причине  не
устраивает установленный  у  Вас  драйвер
клавиатуры (tt_x+.key) или у Вас установ-
лен более старый драйвер -  не  пытайтесь
загрузить его нажатием "ENTER", он загру-
зится, но работать не будет...  Для заме-
ны драйвера клавиатуры  необходимо  напи-
сать bat-файл следующего содержания:

     Q:RES\set xxx.key /e
     Q:RES\set Q:\RES\KEY\yyy.key /r

где xxx - имя старого,  уже  загруженного
драйвера,  которое можно узнать,  посмот-
рев    список    драйверов      утилитами
eliminat.com или show.com,
а yyy - имя нового драйвера,  который  Вы
хотите установить.
     Не  пытайтесь  также  набирать   эти
строки в мониторе командной строки,   так
как первая команда уберет драйвер клавиа-
туры,  тем самым  лишив  Вас  возможности
ввести вторую команду.

      II. Выбор драйвера принтера.

     Выбор драйвера принтера - второй не-
маловажный этап в индивидуальной настрой-
ке системы. Для того,    чтобы  правильно
выбрать драйвер Вам необходимо знать сле-
дующее:

1. Тип интерфейса принтера, установленно-
го в Вашем компьютере.  Хорошо  если  это
один из достаточно широко  распространен-
ных вариантов, например ZX LPRINT III или
Scorpion,  тогда Вам  подойдут  драйверы,
поставляемые  с  системой  по  умолчанию.
     Если у Вас установлен  нестандартный
интерфейс (580ВВ55 или что-нибудь  подоб-
ное),  то Вам  понадобится  специфический
драйвер для этого интерфейса. Такой драй-
вер Вам могут написать на заказ  или  по-
добрать из довольно большой  коллекции  в
Программном отделе ф.  Искрасофт,  но для
этого Вам необходимо будет сообщить неко-
торую техническую информацию (адреса пор-
тов данных и управляющих сигналов,   осо-
бенности обработки сигналов STROBE и BUSY
и т. п.).

2. Cтепень совместимости Вашего  принтера
с системой команд EPSON 9pin. Главным об-
разом,  это влияет на печать графики,  но
также может проявиться и в текстовой  пе-
чати,  если Вы используете директивы  уп-
равления печатью  или  встроенные  шрифты
принтера (NLQ, наклонный, Double Strike и
т. п.).  Так,  например,  печально извес-
тный принтер D-100  (старых  модификаций)
нормально печатает в текстовом режиме, но
имеет нестандартную  систему  команд  для
графического режима со всеми  вытекающими
отсюда последствиями,  а принтер  СМ-6337
не умеет работать с двумя из  восьми  из-
вестных графических режимов,   что  может
вызвать  проблемы  при  работе   программ
LOTUS PRINT или PICASSO, использующих эти
режимы. Наиболее удачным в плане  совмес-
тимости является принтер MC-6313 (матрич-
ный,  не путать со струйным 6312!),  под-
держивающий ВСЕ команды EPSON и даже  еще
кое что.

3. Кодировки (кодовые таблицы), поддержи-
ваемые Вашим принтером.  Тоже очень  важ-
ный параметр. Большинство принтеров,  вы-
пускавшихся (или адаптированных) для при-
менения в  России  поддерживают  т.    н.
Альтернативную кодировку  ГОСТ,    однако
часто встречается также Основная кодиров-
ка ГОСТ, кодировка КОИ8, а некоторые сов-
сем уже старые принтеры (например,  неко-
торые Robotron'ы) поддерживают т. н.  се-
мибитный код,  более известный как  КОИ7.
     Все эти  кодовые  таблицы  полностью
совпадают в области латинского алфавита и
различаются  только  кодировкой   русских
символов. Некоторые  принтеры   поддержи-
вают несколько разных кодировок на  выбор
(например, в МС-6313 их восемь),  которые
переключаются специальными переключателя-
ми или программно.  Система IS-DOS на се-
годняшний день поддерживает  10  наиболее
распространенных кодировок, возможна так-
же разработка новых таблиц на заказ.

     Итак,  как же выбрать тот единствен-
ный драйвер,  который Вам нужен?   Значи-
тельная часть информации о драйвере  зак-
лючена в его имени.  Имя  файла  драйвера
состоит из двух частей,  разделенных сим-
волом подчеркивания "_".  Левая часть от-
вечает за кодировку,  а правая обозначает
конкретную аппаратную  реализацию  интер-
фейса. Кодировка  драйвера   определяется
следующим образом:

+======+================================+
|Левая |Кодировка драйвера              |
|часть |                                |
|имени |                                |
|------+--------------------------------|
|  e   | Альтернативная кодировка ГОСТ  |
|      | полный вариант.                |
|------+--------------------------------|
|  s   | Альтернативная кодировка без   |
|      | символов псевдографики, все    |
|      | рамочки в тексте заменяются на |
|      | +, - и т. п. Cпециальные симво-|
|      | лы с кодами #F0-FF заменяются  |
|      | пробелами.                     |
|------+--------------------------------|
|  M   | Основная кодировка ГОСТ        |
|      | полный вариант.                |
|------+--------------------------------|
|  m   | Основная кодировка без симво-  |
|      | лов псевдографики, символы с   |
|      | кодами #F0-FF заменяются       |
|      | пробелами.                     |
|------+--------------------------------|
|  m+  | Основная кодировка без симво-  |
|      | лов псевдографики, символы с   |
|      | кодами #F0-FF печатаются без   |
|      | перекодировки.                 |
|------+--------------------------------|
|  K8  | Кодировка КОИ8, полный         |
|      | вариант.                       |
|------+--------------------------------|
|  k8  | Кодировка КОИ8 без симво-      |
|      | лов псевдографики, символы с   |
|      | кодами #F0-FF заменяются       |
|      | пробелами.                     |
|------+--------------------------------|
|  K7  | Семибитная кодировка КОИ7,     |
|      | половинки кодовых таблиц       |
|      | (RUS/LAT) переключаются после- |
|      | довательностью команд          |
|      | ESC "R" 1 и ESC "R" 0          |
|------+--------------------------------|
|  k7  | Кодировка КОИ7, половинки      |
|      | кодовых таблиц переключаются   |
|      | кодами #0E и #0F               |
|------+--------------------------------|
|  d   | Специфическая кодировка для    |
|      | принтеров D-100M Mera Blonde   |
|      | Набор No 5, в котрором коди-   |
|      | ровка похожа на Альтерна-      |
|      | тивную, но русские символы,    |
|      | похожие по начертанию на       |
|      | латинские не дублируются.      |
|      |  (Во изврат-то!)               |
+=======================================+

     Недавно по специальному заказу одно-
го из наших пользователей была разработа-
на кодовая таблица для принтера с т.   н.
"Кодовой  страницей  855",    в   которой
большие и малые русские символы  располо-
жены попарно и  в  довольно  оригинальном
порядке,  так что если у кого-нибудь  еще
есть такое чудо - можете пользоваться  им
в полной мере.

     Правая половина имени,  как уже было
сказано выше,  обозначает конкретный  тип
интерфейса Компьютер-Принтер.  По умолча-
нию  с  системой  поставляются  следующие
драйверы:

     *_scorp.lpr - комплект драйверов для
компьютеров  SCORPION  256  через  парал-
лельный интерфейс типа CENTRONICS

     *_ir23.lpr - комплект драйверов  для
подключения через  стандартный  интерфейс
ZX LPRINT III типа CENTRONICS, причем эти
драйверы работают даже на усеченных  вер-
сиях с отсутствующим ПЗУ интерфейса.

     Из других  наиболее  популярных  ва-
риантов имеются:

     *_kay.lpr - комплект  драйверов  для
компьютеров KAY  256  (подключение  через
параллельный порт музыкального  процессо-
ра со своей оригинальной адресацией).

     *_prof.lpr - комплект драйверов  для
компьютера PROFI (подключение  через  па-
раллельный порт на микросхеме 580ВВ55А  с
адресами #3F (данные),  #5F  (управляющие
сигналы) и #7F (регистр управляющего сло-
ва для инициализации порта)

     и многие другие...

     В комплект  поставки  обычно  входят
десять драйверов для всех  поддерживаемых
вариантов кодировок.  Если Вы  затрудняе-
тесь с выбором,  можно определить  нужный
Вам драйвер опытным путем, загружая их по
очереди и распечатывая какой-нибудь хоро-
шо знакомый русский текст.  При этом пос-
ледовательность действий может быть  сле-
дующей:

1. Загрузить  драйвер  принтера  (открыть
подкаталог \PRINT\DRIVE\,  установить  на
имя драйвера курсор и нажать "ENTER")

2. Установить курсор  на  имя  какого-ни-
будь текстового файла,  содержащего  рус-
ский текст  и  вызвать  программу  печати
клавишей "h".

3. Напечатать текст  и  просмотреть  его.
Если вместо русских букв Вы  увидите  не-
вообразимую мешанину из символов псевдог-
рафики или чего-нибудь  подобного,    или
русские буквы будут составлять явно  бес-
смысленный набор, совершенно непохожий на
исходный текст,  или русские слова  юудут
напечатаны латинскими буквами,    драйвер
Вам не подойдет.

4. Выйти  из  программы  печати  (клавиши
SS+A) и запустить программу  eliminat.com
(клавишей "e").    Удалите  установленный
драйвер принтера, установив курсор на его
имя и нажав "ENTER".

5. Повторите пп.  1-4 для всех драйверов,
пока не подберете нужный.

     Обратите внимание на п.  4  -  перед
загрузкой очередного драйвера ОБЯЗАТЕЛЬНО
удалите предыдущий,  так как система реа-
гирует только на  один  драйвер  (который
был загружен раньше) из нескольких  уста-
новленных.

     Теперь,  когда Вы выбрали Ваш  един-
ственный и неповторимый драйвер принтера,
Вы можете, установив его,  сохранить сис-
тему командой sv.com как это было  описа-
но выше,  и тогда этот драйвер всегда бу-
дет в  Вашем  распоряжении  при  загрузке
системы, однако,  в целях экономии памяти
мы не рекомендуем этого  делать.
     Лучше всего грузить драйвер  принте-
ра только при необходимости что-то  печа-
тать,  так как при работе некоторых прог-
рамм,  например Ассемблера,    количество
свободной памяти имеет очень большое зна-
чение. Впишите загрузку драйвера  принте-
ра в autoexec.bat:

     Q:RES\set Q:\PRINT\DRIVE\*.lpr

где * - имя Вашего драйвера,  или  просто
грузите его нажатием "ENTER"  как  всякий
другой драйвер.  Убрать ненужный  драйвер
принтера можно программой eliminat.com, а
также при помощи команды:

     Q:RES\set *.lpr /e

где * - имя установленного драйвера.

    III Установка электронного диска

     По поводу этой темы уже была опубли-
кована целая статья в одном  из  предыду-
щих номеров журнала,  поэтому здесь мы не
будем особенно распространяться,   напом-
ним только,  что существуют следующие ви-
ды драйверов:

ed_128.blk    (04.10.94, 560 байт)  стан-
              дартный  драйвер  для  всех
              машин с 128К ОЗУ Может быть
              использован   НА  ЛЮБОМ  ZX
              Spectrum    для    создания
              RAM-диска размером не более
              80К.

ed128-.blk   (24.04.95,  169 байт) умень-
              шенный вариант драйвера для
              Spectrum  128  и других ма-
              шин, имеющих не менее 128К.

ed_scorp.blk (04.10.94,  533 байта) стан-
              дартный драйвер для компью-
              теров  Scorpion и совмести-
              мых  с ними компьютеров Pe-
              ters  256 и KAY 256. Он ис-
              пользует  128К  памяти,  не
              входящих   в   конфигурацию
              Spectrum 128, что позволяет
              избежать   конфликта  между
              электронным диском и допол-
              нительным  буфером копиров-
              щиков.

edsco+.blk   (02.09.94, 546 байт) альтер-
              нативный     драйвер    для
              компьютеров, совместимых со
              стандартом Scorpion. Он ис-
              пользует  всю  память  выше
              48К   и  позволяет  создать
              диск  размером до 208К. Ес-
              тественно, требует выключе-
              ния буфера копировщиков.

edsco-.blk   (29.04.95, 195 байт)  умень-
              шенный   вариант   драйвера
              ed_sco+.blk

ed_profi.blk (01.11.93, 528 байт) драйвер
              для  компьютеров   Profi  с
              объемом  ОЗУ до 1Мб. Он ис-
              пользует  только память, не
              входящую   в   конфигурацию
              Spectrum 128, что позволяет
              спокойно пользоваться буфе-
              ром   копировщиков  и  дает
              возможность  создавать диск
              объемом до 896К, что на 300
              байт превышает объем диске-
              ты в IS-DOS!

edprof-.blk  (20.06.95,  178 байт) умень-
              шенный драйвер для Profi.

ed_atm.blk   (30.09.94, 538 байт) драйвер
              электронного диска, работа-
              ющий  на одном из компьюте-
              ров  серии  ATM,  на  каком
              именно,  к  сожалению  пока
              установить   не  удалось  в
              связи с разнообразием и не-
              достаточной  распространен-
              ностью  этих  компьютеров в
              нашем  городе.

ed16.blk     (27.06.93,  72 байта) специ-
              альный  драйвер для компью-
              теров с "теневым ОЗУ", поз-
              воляет   создать   16-кило-
              байтный   электроный  диск,
              поставляется с настройщиком
              ed16tune.com,  который спо-
              собен   настраивать   адрес
              порта,  включающего теневую
              страницу на различных моде-
              лях компьютеров.

edkay.blk    (02.08.96,  236 байт) специ-
              ально   разработанный   для
              комппьютеров  KAY,  дорабо-
              танных до 512К.

     Кроме того, существует ряд специали-
щированных  драйверов,  как-то:  ed_3.blk
для компьютеров Amstrad, ed128rom.blk для
компьютеров с системой IS-DOS, прошитой в
ПЗУ, ed128ram.blk для IS-DOS CHIC и т. п.
Все драйверы электронного диска  распола-
гаются в каталоге \SERVICE\BLK\.

     В последнее время появились  модифи-
кации всех вышеперечисленных драйверов, в
которых стало возможным прерывание опера-
ций с  блочными  устройствами  на  уровне
драйвера (по клавише BREAK),  имена  этих
драйверов оканчиваются на букву b, напри-
мер:

ed123-b.blk, edkay-b.blk и т. п.

     Драйвер  электронного  диска   можно
также сохранить вместе с системой при по-
мощи sv.com,  но лучше поберечь свободную
память и написать bat-файл.   Подробности
можно узнать в вышеупомянутой статье.

          IV Драйверы дисплея.

     В отношении драйверов дисплея в сис-
теме IS-DOS  не  наблюдается  такого  бо-
гатства выбора, как в других областях, да
это и не удивительно,  какими бы ни  были
организация страничной памяти  или  прин-
терный интерфейс, экран SPECCY - остается
экраном SPECCY со всеми его достоинствами
и недостатками.

     Всего существует три  драйвера  дис-
плея,  поставляемые с системой по умолча-
нию,    все  они  находятся  в   каталоге
\RES\TYP\ :

t42.typ -  стандартный  драйвер  дисплея,
установленный по умолчанию,  обеспечивает
видеорежим 42 символа в строке с матрицей
6*8 точек. Символы с кодами менее #20  не
отображаются или отображаются в виде "му-
сора" на экране. Файловая оболочка IS-DOS
работает ТОЛЬКО с драйвером 42 симв/стр.

typ42_f.typ  -  альтернативный    вариант
драйвера t42.typ,  отличающийся тем,  что
символы с кодами менее #20  имеют  графи-
ческое изображение, аналогичное изображе-
нию в знакогенераторе IBM  PC  (мордочки,
стрелочки, карточные масти и т. п.).  Та-
кой драйвер удобно применять для  отладки
своих программ, драйверов печати и т.  п.
Главный  недостаток  его  -  сравнительно
большой размер - 2270 байт (а  t42.typ  -
только 1985).

ty64.typ -  дополнительный  драйвер  дис-
плея,   применяемый  только  в  программе
просмотра текстов tv.com и текстовом  ре-
дакторе. Он загружается в память в допол-
нение   к    основному    (t42.typ    или
typ42_f.typ) и     включается-выключается
специальными клавишами.  Обеспечивает при
просмотре и редактировании текстов видео-
режим 64 символа в строке с матрицей  4*8
точек. Не  стоит  пытаться   использовать
этот драйвер вместо t42.typ,  ни  к  чему
хорошему это не приведет.

     Дополнительные драйверы дисплея мож-
но загружать стандартными способами:  или
нажатием "ENTER", или командами:

Q:RES\set Q:RES\TYP\typ42_f.typ
Q:RES\set Q:RES\TYP\ty64.typ

     Если Вы хотите заменить  стандартный
драйвер t42.typ  на  расширенный,    вос-
пользуйтесь  имеющимися    в    комплекте
bat-файлами или напишите свои по  следую-
щей схеме:

для замены t42.typ на typ42_f.typ:

Q:RES\set t42.typ /e
Q:RES\set Q:RES\TYP\typ42_f.typ /r

для обратной замены, соответственно:

Q:RES\set typ42_f.typ /e
Q:RES\set Q:RES\TYP\t42.typ /r

     По той же причине,  что и в драйвере
клавиатуры, не рекомендуется набирать эти
строки в мониторе командной  строки,    в
этом случае также рекомендуется использо-
вать ТОЛЬКО bat-файлы.
     Удалить   ненужный    дополнительный
драйвер дитсплея можно при помощи все той
же программы eliminat.com или команды:

          Q:RES\set xxx.typ /e

     Будьте осторожны,  чтобы не  удалить
ненароком  и  основной  драйвер,     если
eliminat.com не позволит Вам  этого  сде-
лать, то set в этом отношении более кова-
рен, а набирать строки команд "вслепую" -
занятие не для слабонервных.

        V. Резидентные программы.

     В системе IS-DOS существует стандар-
тный набор резидентных программ, устанав-
ливаемых по умолчанию.  Однако,   это  не
значит, что без этих программ система от-
кажется работать,  более того,  в некото-
рых случаях для освобождения памяти необ-
ходимо снимать большую часть  резидентных
программ. Итак,  по умолчанию  в  системе
установлены:

calc.res - программа автоматического под-
счета  контрольной  суммы  при  изменении
файла. Это - наиболее  важная  программа,
снимать которую  рекомендуется  только  в
самых крайних случаях.  Она пересчитывает
контрольную сумму файлов при  их  измене-
нии (настройке параметров и т.  д.),  что
позволяет     избежать   досадной  ошибки
Error  250  при    запуске    измененного
com-файла.

mkdir.res - программа для создания  ката-
логов и подкаталогов на  блочных  устрой-
ствах. Если Вы уверены,  что Вам не пона-
добится их создавать,  смело убирайте ее,
в крайнем случае,  Вы всегда сможете вос-
пользоваться для  этих  целей  программой
mkdir.com.

gmen.res - программа для назначения  дис-
ковых устройств (системного,  быстрого  и
текущего), если Вам не понадобится их пе-
реназначать - убирайте и ее.  При этом Вы
сможете  спокойно  переназначать  устрой-
ства при помощи внутренних команд DOS:

               L_S /x
               L_Q /y
               L_T /z

где x,  y и z - имена  реальных  дисковых
устройств,  или воспользовавшись програм-
мой gmen.com.

mon.res или mon+.res - собственно,  мони-
тор командной строки.  Работать без  него
довольно сложно, однако,  на крайний слу-
чай,  есть опять-таки com-овский  вариант
под названием mon.com, правда он не запо-
минает введенные ранее команды как  рези-
дентный,  да и запускается несколько мед-
леннее, но пользоваться все-таки можно.

date+3.res - довольно удобная вещь, отоб-
ражает над файловыми панелями  строчку  с
датой создания текущего файла  и  некото-
рой другой полезной информацией. Вещь,  в
принципе, нужная, но можно и обойтись.

     Любую из резидентных программ  можно
удалить в интерактивном режиме при  помо-
щи программы eliminat.com, а в командном-
командой:

          Q:RES\set *.res /e

где * - имя резидентной программы.   Уда-
лить сразу все резидентные программы мож-
но  из    командной    строки    командой
eliminat.com с ключом /r.

     Восстановить стандартный набор рези-
дентных программ можно  при  помощи  спе-
циального bat-файла standart.bat, находя-
щегося в каталоге \RES\ базового комплек-
та IS-DOS.

        VI. Настройка окружения.

     Помимо настройки и  подбора  драйве-
ров, есть еще несколько важных моментов в
индивидуальной настройке системы  IS-DOS.
Настройка окружения заключается, в основ-
ном,  в изменении  размера  КЭШ-памяти  и
размера области каналов системы.

     Размер кэш-памяти изменяется при по-
мощи специальной утилиты,  которая так  и
называется, cache.com.  Новый размер кэша
задается в качестве параметра при  вызове
утилиты из командной строки, например:

          cache.com /32
          cache.com /12

     Помните,  что размер  кэш-памяти  не
может быть меньше 6 блоков,  особенно  не
увлекайтесь,  оптимальный размер кэша для
IS-DOS CLASSIC - 27-29 блоков, для CHIC -
40-45.  Текущий размер  кэш-памяти  можно
узнать при помощи утилиты show.com.
     По окончании настройки  не  забудьте
сохранить систему командой sv,   как  это
уже было описано выше.

     Второй немаловажный  момент  -  нас-
тройка размера области  каналов  системы.
Размер этой области регулируется при  по-
мощи утилиты channel.com.   Новый  размер
области каналов задается в качестве пара-
метра в командной строке, например:

          channel /1000
          channel /2000

     Рекомендуемый размер  области  кана-
лов для работы  с  текстовым  редактором,
ассемблером и прочими  прикладными  прог-
раммами 1000,  для баз данных и АРМ необ-
ходим больший размер  области  каналов  -
2000. Минимальный размер области каналов,
при котором система еще  может  существо-
вать - около 700 байт,  естественно,  что
базы данных при такой конфигурации  рабо-
тать не смогут.  Текущий  размер  области
каналов Вы можете узнать при помощи  ути-
литы show.com.  Там же можно узнать и те-
кущее количество свободных и занятых байт
в области каналов,  чтобы оценить степень
эффективности ее  использования  и  точно
подобрать оптимальный размер для конкрет-
ной задачи.

      VII Настройка цветов системы.

     Настройка цветов  файловой  оболочки
системы IS-DOS в версии  4.5  значительно
упрощена,  по сравнению с  более  ранними
версиями.  Для настройки  цветов  системы
используется    специальная       утилита
atomiz+4.com,  располагающаяся в каталоге
\SERVICE\ базового диска IS-DOS.
     Эта утитлита содержит в себе  цвето-
вую таблицу настройки цветов в  стандарте
unicolor, которую она в момент своего за-
пуска "пристегивает" к загруженной в  па-
мять операционной системе.
     Изменить эти цвета можно при  помощи
утилиты unicolor.com,  как и в любой дру-
гой программе IS-DOS. Для этого необходи-
мо  установить  курсор  на  имя   утилиты
atomiz+4.com и нажать клавишу "u", за ко-
торой,  как известно,    закреплен  вызов
программы unicolor.com.
     После того,  как Вы выберете и уста-
новите понравившиеся Вам цвета (всего  их
должно быть 19),  выберите в списке  цве-
тов строчку с надписью IS-DOS,  после че-
го Вам  будет  предложено  сохранить  ре-
зультат своей работы в файле atomiz+4.com
(на нем будет стоять курсор).    Если  Вы
уверены в том,  что правильно  определили
цвета, - смело нажимайте кнопку "p" (PUT)
и Ваша цветовая  гамма  будет  сохранена.
После этого останется  только  "передать"
цвета системе, запустив (нажатием "ENTER"
или из  команлной  строки)  саму  утилиту
atomiz+4.

     Еще раз напоминаем, что, после окон-
чания настройки  текущий  вариант  опера-
ционной системы  необходимо  сохранить  в
файле  is_dos.sys  при  помощи  программы
sv.com, набрав в командной строке:

                sv is

     Вообще-то, имя системного файла сов-
сем   не    обязательно    должно    быть
is_dos.sys. Наоборот, будет даже удобнее,
если Вы оставите стандартный файл без из-
менений (просто так, на всякий случай), а
свой настроенный сохраните в файле с дру-
гим именем.
     Имя системного файла IS-DOS  состоит
из двух частей, разделенных символом под-
черкивания "_". Правая часть (dos) и рас-
ширение (sys) являются стандартными и из-
менению ни в коем случае не подлежат. Ле-
вая же часть (от 1 до 4-х  символов)  мо-
жет быть любой по  желанию  пользователя.
Она-то (эта часть) и  указывается  в  ка-
честве параметра при вызове утилит sv.com
и con.com. Будьте внимательны с  именами.
Если Вы хотите, например,  сохранить сис-
тему под именем "my_dos.sys",   Вам  сле-
дует набрать в командной строке:

               sv my
а при подключении системы набрать  в  ко-
мандной строке:

               son my

     Обратите внимание,  что в обоих слу-
чаях набирается ТОЛЬКО левая (изменяемая)
часть имени.

  На диске может находиться  неограничен-
ное ничем (кроме размера диска, разумеет-
ся) количество файлов *_dos.sys,  в кото-
рых могут быть сохранены РАЗНЫЕ  варианты
настройки системы под различные типы  за-
дач.  Эти варианты можно менять прямо  по
ходу работы,  перезагружая их при  помощи
утилиты isrld.com,  в качестве  параметра
которой  необходимо  указать  ПОЛНОЕ  имя
требуемого системного файла с расширением
Например:

     isrld my_dos.sys
     isrld work_dos.sys

     По  умолчанию  ВСЕГДА  будет  загру-
жаться только тот системный файл,   кото-
рый в данный  момент  подключен  командой
con. Если система после очередного  пере-
подключения командой con перестанет  заг-
ружаться,  попробуйте еще  раз  запустить
программу boot.com.

     Для IS-DOS CHIC порядок  подключения
системных файлов несколько отличается  от
"Классического" - главным  образом  из-за
наличия двух системных файлов -  изменяе-
мого (по имени zs_dos.sys) и неизменяемо-
го (по имени zs_dos.rom).
     Все вышеупомянутые настройки  (вклю-
чая  установку  драйверов  и  резидентов)
производятся в первом файле, он же сохра-
няется командой sv.com так же,  как  и  в
IS-DOS CLASSIC,    только  имеет  гораздо
меньший размер (около 40 блоков,    а  не
85-90 как у CLASSIC).
     Этот же файл  подключается  командой
con обычным способом:

               con zs

  после чего следует специфическая коман-
да,  подсоединяющая второй (неизменяемый)
системный файл. Команда эта выглядит сле-
дующим образом:

     boot T: T:SERVICE\zs_dos.rom

где T: - имя дисковода, на котором произ-
водится  подключение, а второй параметр -
имя и путь к соответствующему  системному
файлу.

     Еще один  ОЧЕНЬ  важный  для  IS-DOS
CHIC момент - для успешного создания заг-
ружаемого диска  IS-DOS  CHIC  совершенно
необходимо,  чтобы системная область дис-
ка была создана специальным образом.  Это
связано, главным образом, с большими раз-
мерами загрузочного модуля  IS-DOS  CHIC.
Для того,  чтобы выполнить  это  условие,
при  форматировании   диска    программой
format.com или при создании его  програм-
мой  create.com  в   строке    параметров
"boot:" должно быть указано Chic.   Иначе
система загружаться не будет.

     Ну вот, уважаемые читатели,  кажется
и все,  о чем мы хотели рассказать вам  в
этой небольшой статье. Если у вас возник-
ли какие-либо вопросы или пожелания, зво-
ните нам по телефону

     245-90-11 (доб.721 или спросить
                Отдел IS-DOS)

по рабочим дням с 11.00 до 16.00.

     В следующих номерах журнала мы  пла-
нируем рассказать Вам  об  индивидуальной
настройке различных  программ  и  утилит,
входящих  в  Базовый  комплект    IS-DOS,
как-то: копировщики,  программа просмотра
текстов,  текстовый редактор,   программа
печати и некоторые другие.

     Ждем Ваших откликов на наши публика-
ции, пишите нам, звоните, приходите в наш
новый офис по адресу:

    Лесной пр.  65 корп. 11
         Отдел IS-DOS

     До новых встреч в следующих  номерах
журнала ZX FORMAT!

_________________________________________