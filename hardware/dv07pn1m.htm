<pre>
Из журнала Deja Vu #07, Кемерово, 1999



(C) Ivan Mak

==========================================
     Схема подключения 1Mb 30pin SIMM
 к компьютерам типа Pentagon (Ленинград)
==========================================
</pre>
<img src=dv07pn1m/pic1.gif>
<pre>
DD64:1 подать на DD18:11.
На DD16:5 и DD16:11 подать общий провод.

Поменять местами DD18:2(AB) и DD19:13(C34)
                DD16:2(B11) и DD17:13(C35)
   Старые сигналы от ног, куда идут новые-
-отрезать. Все микросхемы серии 1533. Воз-
можна, но не рекомендуется замена на серию
555.
   Вместо 1533КП12  можно ставить 1533КП2.
Диод VD - любой маломощный,например КД522.
   Микросхемы памяти РУ5(7)необходимо уда-
лить с платы (или заблокировать, если мощ-
ность БП позволяет их оставить).
   Если  возникнут  какие-либо  проблемы с
регенерацией  (Пентагон  все-таки:)  можно
сделать такую вещь: на ИР22 (см. выше) по-
давать сигнал с DD51:4, пропущенный  через
элемент ЛИ1:
</pre>
<img src=dv07pn1m/pic2.gif>
<pre>
   Микрик S2(и эл-т ЛИ1) нужно ставить,ес-
ли вы собираетесь аппаратно отключать вер-
хнюю память. А  иногда бывает достаточно и
S1, это если прога не понимает всех  стан-
дартов на расширенную память.
   bit2 порта #EFF7 -это программная  бло-
кировка памяти выше  128К. Если  у  вас  в
компе этот порт  отсутствует, вместо этого
сигнала подавайте общий провод.
   Сигналы шин адреса и данных  процессора
обозначены как А0..А15 и D0..D7 соответст-
венно (будьте внимательны!).
   Необходимо еще убрать блокировку памяти
выше 48K. Убирается элементарно:от DD64:11
отрезается bit5 #7FFD и на эту DD64:11 по-
дается общий провод. У меня этой 48-й  за-
щелки нет уже года полтора и ни  разу  еще
не было с этим проблем. Правда, мне прихо-
дилось видеть несколько древних 48-х игру-
шек, которые без нее не работали. Если  же
среди этих игрушек как назло оказалась ва-
ша любимая:), не беда - это  решается тоже
просто. Здесь можно использовать в качест-
ве S2 сдвоенный  микрик. Тогда  это  будет
так:
</pre>
<img src=dv07pn1m/pic3.gif>
<pre>
Или заменить этот микрик элементом лог.И:
</pre>
<img src=dv07pn1m/pic4.gif>
<pre>
   Теперь при сбросе бита2 порта  #EFF7  в
нуль память выше 128 будет  открываться  и
48-я защелка - блокироваться. А при  уста-
новке его в единицу будет закрыт доступ  к
памяти выше 128К и 48-й защелкой можно бу-
дет пользоваться.
   Если в компе есть CMOS-часы и  установ-
лена прошивка ПЗУ "MadRom",то все эти мик-
рики можно убрать  и  сделать  программное
управление  ими, из  CMOS_SETUP. Подробнее
см. help к прошивке.

==========================================
             Для Ленинграда:
==========================================

вместо B14 на КП12 подавать с DD19:4;
вместо B15 на КП12 подавать с DD19:7;
вместо С14 на КП12 подавать /RAS с DD2:9;
вместо C23 на КП12 подавать /H1 с DD34:2;
вместо DD61:1 подавать сигнал с  1-й  ноги
              КП11 (доработка до 128К);
вместо DD62:9 подавать сигнал с  9-й  ноги
              ТМ9 (доработка до 128К);
вместо DD51:4 подавать сигнал с DD9:8;
вместо DD18:5 подавать на DD15:3;
вместо DD64:1 подавать с 12й ноги КП11(до-
              работка до 128К) на DD15:6;
вместо DD16:5 и DD16:11 землю подавать  на
                        DD18:3 и DD18:6.
* на 15ю ногу КП11 (доработка до 128К) ре-
  комендуется подать  землю, освободив  ее
  (ногу) предварительно от H1.
* с 9й и 12й ног этой же КП11 рекомендует-
  ся убрать резисторы.


Необходимо еще сделать такую доработку:
</pre>
<img src=dv07pn1m/pic5.gif>
<pre>
доработка эта нужна, чтобы программы,пишу-
щие в область адресов #0000..#3fff,не пор-
тили 128-ю память.

шину данных SIMM подавать на DD32;
шину адреса для SIMM брать  с  одноименных
ног бывших РУ5(7)-это ножки 5,6,7,9,10,11,
12,13;
/RAS для SIMM взять с DD2:9;
/CAS берется вот так:
</pre>
<img src=dv07pn1m/pic6.gif>
<pre>
В качестве инвертора можно юзать оставший-
ся элемент ЛЕ1. И на КП11-х менять местами
ничего не нужно - в Ленинграде таких замо-
рочек с регенерацией нет.

   Ленинградовская  доработка  "расширение
памяти до 128к". Имеется ввиду именно  та,
в которой управление CAS'ами осуществляет-
ся с помощью КП11 и ЛА3.
   В принципе, это есть аналог пентагонов-
ской схемы управления 128к,но в Л-ской ис-
пользуется Z-состояние КП11. Если на дора-
батываемом  Ленинград-клоне  сделана  иная
схема, следует в ней разобраться.

==========================================

   Как видно, основа данной схемки - схема
доработки Пентагона-128 до 512К  by  В.М.Г
(из Spectrofon-17). Если SIMM ставится  на
512-й комп, то, скорее  всего, потребуется
добавить  лишь  незначительное  количество
микросхем и не делать необходимые  для ре-
генерации перестановки.
   В качестве портов расширения до 1Mb ис-
пользованы Profi-порт (#DFFD, mask #07)  и
Pentagon-1024 (#7FFD, mask #e7).
   Вместо 1Mb 30pin SIMM  можно  вставлять
2Mb-30pin (проверено). Только нужно подать
землю на 19-й пин SIMM'a (A19).
   Разумеется, доступ будет возможен толь-
ко к  младшему  мегабайту. По  аналогичной
системе можно подключить и 4Mb-30pin  SIMM
(поставить еще ТМ8, КП12 и  ЛЕ1), проблема
только в реальном отсутствии порта и софта
под такой объем памяти. Правда, в STS6.2 и
IS-DOS возможно использование  памяти  под
любыми портами, был бы драйвер.

            *       *       *

   Мне могут задать  самые  каверзные, для
таких случаев, вопросы (и задают:): да за-
чем тебе этот мегабайт  нужен??! =8[  ] И,
вообще, софт под него есть? :]
   Yeesть! что касается Профи, то это  от-
дельный разговор, а для мегабайта на #7FFD
самая "главная" софтина - TR-DOS 5.12f  by
Reanimator. Для тех, кто до сих пор в тан-
ке, напоминаю: в этом  ДОСе  вместо  диска
"D" форматируется  RamDisk  на  892кb! Все
проги, использующие  для обращения к диску
#3D13, работают на  рамдиске намного быст-
рее. Естесно, проги не должны портить 512ю
память.
   Лично мне вполне  этого  хватает, чтобы
(быстро!:) тоссить почту с реального диска
на виртуальный. Или, скажем,ZIP... Или ас-
семблирование с подгрузками. Много еще че-
го...

   Нумерация микросхем дана по  той  схеме
Пентагона, в которой адресные сигналы про-
цессора  обозначены как А1-А16. A на схеме
Ленинграда написано "Drafted in Kharkov".
</pre>