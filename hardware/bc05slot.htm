<pre>
Из журнала 'Чёрная Ворона 5'
Украина, Донецкая область, г.Дмитров-1, 01.2001



       СЛОТОВАЯ СИСТЕМА
     ИЗ ПОДРУЧНОГО ХЛАМА

(C) 2000 Veles
-----------------------------------------
    Здравствуй, Михаил! Вот прочитал чет-
вёртый  номер "Черной Вороны" и решил на-
писать.  Зовут  меня  Стоцкий Андрей (Ve-
les), мне 22 года, на Спектруме с 6 клас-
са.
    Читал  только  2 последних журнала, и
они мне очень понравились. Из того, что я
видел- это лучшее. Единственное замечание
по  четвертому номеру,  так  это музыка -
очень  раздражающая  и  режущая  слух.  В
третьем номере гораздо лучше.
    Я  занимаюсь  ремонтом  и  доработкой
SPECCY  на донецком радиорынке уже больше
года  и  заметил  одну неприятную особен-
ность  -  для подключения любой периферии
приходится  приносить компьютер и лезть в
него  с  паяльником.  У меня еще до этого
была идея  сделать такую конструкцию, как
на  IBM  (даже  от  монстров  можно взять
что-то  хорошее), когда контроллеры пери-
ферии  вставляются в специальные разъемы.
Первоначально  мысль была найти точно та-
кие  разъемы,  развести  плату под SPECCY
(Cross-плату),  установить  туда буфера и
пользоваться  полученными удобствами. По-
дойдя  к торгующим IBM железом, я спросил
о  разъемах и мне предложили купить битую
мать  за  3 гривны и самому их выдрать. Я
так  и сделал. И тут начинается самое ин-
тересное. При детальном осмотре материнки
оказалось, что там есть всё необходимое и
даже больше!
    Теперь  расскажу,  что нужно сделать,
чтобы получить нормальную Cross-плату для
SPECCY.
    Для распайки слотов (разъёмов под пе-
риферию)  был выбран стандарт KAY и SCOR-
PION. Зачем изобретать велосипед?

          +-------+--+-------+
          |     B |  | A     |
          +-------+--+-------+
          |   A15 |01| A14   |
          |   A13 |02| A12   |
          |    D7 |03| +5V   |
          |   BLK |04| DOS/  |
          | TURBO |05| F     |
          |    D0 |06| GND   |
          |    D1 |07| GND   |
          |    D2 |08| CLK   |
          |    D6 |09| A0    |
          |    D5 |10| A1    |
          |    D3 |11| A2    |
          |    D4 |12| A3    |
          |  INT/ |13| IOGE/ |
          |  NMI/ |14| GND   |
          | HALT/ |15| RDR/  |
          | MREQ/ |16| RS    |
          | IORQ/ |17|*-12V  |
          |   RD/ |18|*-5V   |
          |   WR/ |19| BRQ/  |
          |   --  |20| RES/  |
          | WAIT/ |21| A7    |
          |   --  |22| A6    |
          |   --  |23| A5    |
          |   M1/ |24| A4    |
          | RFSH/ |25| CSR/  |
          |    A8 |26| BAK   |
          |   A10 |27| A9    |
          |   +5V |28| A11   |
          |  +12V |29| +5V   |
          |   GND |30| GND   |
          +-------+--+-------+
 
INT/ - может  использоваться как выходной
       сигнал  таймера  с периодом следо-
       вания  импульсов 20 мс.
RDR/ - точка перехвата: блокировка ОЭ ПЗУ
       системной платы.
CSR/ - строб чтения ПЗУ (20+22 ноги).
DOS/ - активность  TR-DOS  (1  нога ПЗУ
       27512).
RS   - выбор банка ПЗУ 128/48 (27 нога
       ПЗУ 27512).
BLK  - подключение ОЗУ в "0"-ю страницу
       (D0 порта #1FFD)
IORQ/- строб чтения из порта.
IOGE/- блокировка портов последующих сло-
       тов и системной платы.

    Сигналы синхронизации:
F    - 14 MHz,  инверсия частоты на входе
       первого  делителя  (счетчика). Ин-
       версия  обязательна, так как необ-
       ходима правильная фаза сигнала.
CLK  - 3.5 MHz, меандр, инверсный  такто-
       вой последовательности процессора.

    Сначала  с  платы  необходимо удалить
всё  лишнее. Аккуратно выпаиваем панельки
под  SIMM, их можно использовать для рас-
ширения вашего компьютера на планках SIMM
30pin.  Находим  на  плате разъемы в виде
штырьков (полную раскладку приведу ниже):
 RESET (2pin) - от 1-ой ноги идет  резис-
                тор на +5V, его необходи-
                мо оставить;
 KEBLOCK (5pin) - от 1-ой  ноги  идет ре-
                  зистор  330 Ом  на +5V,
                  сюда подключается  све-
                  тодиод "Сеть";
 TURBO SW       - переключатель TURBO;
 TURBO LED      - светодиод TURBO;
 SPEAKER        - внутренний динамик,
их необходимо оставить.
Далее  находим микросхему с цифрами 4069,
место  под  батарейку  и  микросхему-часы
(146818,  6818,  85C168  Winbond, 5818) -
все  резисторы, конденсаторы, транзисторы
и диоды, которые с ними соединены необхо-
димо   оставить,  все  остальное  удалить
(кроме блокировочных конденсаторов). Так-
же необходимо  удалить  все микросхемы, у
которых больше чем 20 ног, при этом необ-
ходимо  следить  чтобы на контактных пло-
щадках,к которым припаивались микросхемы,
небыло "соплей".
    Если  у  вас  контроллер дисковода на
отдельной плате, а у вас есть желание ус-
тановить его как слот, то необходимо так-
же удалить один из разъмов под слоты (же-
лательно крайний и ближе к SIMMам).
    После  всего вышеперечисленного плата
готова  к сборке. Теперь необходимо отре-
зать  всё  питание,  которое  поступает к
слотам:  +12V, +5V, -12V, -5V, ОБЩИЙ; так
как  его  расположение  не  соответствует
слотам KAY и SCORPION. Если плата многос-
лойная  (обычно  4-х), то внутренние слои
это +5V и ОБЩИЙ. В этом случае необходимо
аккуратно,  не повредив, удалить контакты
B1, B3, B10 и B29 во всех слотах (см. ри-
сунок),  рассверливаем  отверстия сверлом
1.2 мм и вставляем контакты на место. Для
надежной  изоляции  ножек  от  внутренних
слоев  на них необходимо одеть термостой-
кий  кембрик  или термостойкую изоляцию с
проводов. Диаметр сверла выбран так, что-
бы в отверстие свободно входила изоляция,
но  не  повреждались проводники на плате,
проходящие  рядом  с  ножкой. После этого
небходимо соединить соответствующие ножки
каждого  слота,  а  также  продублировать
проводом 0.12-0.15 мм  контакты  питания:
А3, A6, A7, A14, A29 и B28. В каждом сло-
те  соединить  между  собой контакты B31,
B30 и A30. Все печатные проводники, кото-
рые подходят к слотам, необходимо удалить
воизбежание проблем.
</pre>
<img src=bc05slot/pic1.gif>
<pre>
1 - разъем для подключения клавиатуры
2 - разъем для подключения питания

    Аналогично  поступаем  с  двумя рядом
стоящими  линейками SIMMов, у них высвер-
ливаем ноги 1, 9, 24 и 30. На место SIMMа
необходимо  запаять  разъем СНП58-64 папу
(со штырьками) таким образом.
</pre>
<img src=bc05slot/pic2.gif>
<pre>
Распайка  разъема  СНП58-64  должна  пол-
ностью  соответствовать  распайке слотов.
Это  позволит  унифицировать Cross-платы,
проводить их замену без использования па-
яльника и использовать Cross-плату от лю-
бой  модели  Spectruma  с любым системным
разъемом. Для этого РАЗЪЕМ "ПАПУ" необхо-
димо СТАВИТЬ В CROSS-ПЛАТУ И РАСПАИВАТЬ В
СООТВЕТСТВИИ С РАСПАЙКОЙ СЛОТОВ.

После  этого  собираем  приведенную  ниже
схему.  Большая часть микросхем уже стоит
на  плате, нужно только отрезать все под-
ходящие к ним печатные проводники. Приве-
ду импортные аналоги наших микросхем, ко-
торые нужны для схемы и могут встретиться
на плате:

             AП5     74XX244
             АП6     74XX245
             ЛА3     74XX00
             ЛЛ1     74XX32
             ЛА2     74XX30
             ЛН1     74XX04
             ИД7     74XX138
             ЛЕ1     74XX02
             ТМ2     74XX74
(Часть микросхем используется для CMOS-
часов)
 где XX-серия микросхемы
        отсутствует  155
             S       531
            LS       555
           ALS       1533
             F       1531
</pre>
<img src=bc05slot/pic3.gif>
<pre>
Все резисторы 820 Ом - 1 кОм
Резисторные  сборки  тоже  можно найти на
плате. С точкой - общий вывод, первых две
цифры - это  значение, третья это моножи-
тель 10 в степени (103 - 10кОм, 472 - 4.7
кОм).
    Буферные  микросхемы АП5 и АП6 должны
быть  лучше всего серии 1531, так как вы-
ходы  этих микросхем имеют большую нагру-
зочную  способность,  а  их скорость даже
выше, чем у серии 1533. Либо можно поста-
вить  555, но могут возникнуть проблемы в
турбо  режиме. Серию 1533 ставить нельзя,
так как они очень маломощные.
    Остальные  микросхемы  лучше  ставить
1533 или 1531, но можно и 555.
    Сигналы обозначенные "'" выводятся на
разъемы слотов.
    Сигнал  CLK необходимо прямо на плате
компьютера  пропустить  через  инвертор и
только  после  этого  подавать в шлейф на
Cross-плату.
    Линию  TURBO  (B5) нужно соединить со
свободной  ногой штырькового разъема TUR-
BO_SW  на Cross-плате (вторая нога обычно
идет на ОБЩИЙ, но стоит проверить).
    Линию  RES/  (A20) нужно соединить со
свободной ногой штырькового разъема RESET
на  Cross-плате  (вторая нога обычно идет
на ОБЩИЙ).
    Штырьковый разъем TURBO_LED необходи-
мо  установить  на плате компьютера (если
есть турбо). Сигнал на него подаем с пер-
вой ноги мультиплексора, который переклю-
чает  частоту  процессора  через буферный
элемент.
    Такие разъемы удобно использовать, но
наиболее  это пригодиться при установке в
IBM'овский корпус (например Mini Tower) -
все  разъемы  корпуса вставляются в соот-
ветствующие    разъемы    компъютера    и
Cross-платы. Питание на компьютер подает-
ся  через  Cross-плату,  куда вставляется
разъем блока питания корпуса.
    Разъем  для клавиатуры на Cross-плате
также используется по назначению. Необхо-
димо  отрезать  все  печатные проводники,
которые  к нему идут и подпаять к следую-
щий шлейф с разъемом, который вставляется
в карту контроллера XT_Keyboard & MS_Mou-
se.
</pre>
<img src=bc05slot/pic4.gif>
<pre>
    Еще необходимо развернуть диод на пи-
тании  микросхемы  часов, который идет на
4-х  штырьковый  разъем для внешней бата-
реи,  тогда  сюда  можно  будет вставлять
разъем питания статичестких микросхем па-
мяти  или  аналогичных  вещей  на  картах
(например карта CACHа).

    Теперь  немного  объясню работу схемы
управления  буфером шины данных. Передача
сигналов  от  процессора  к  слотам  осу-
ществляется  всегда  при активном сигнале
WR/  (активен  нулем). А вот при передаче
сигналов  от слотов может конфликтная си-
туация  в результате того, что отвечающее
устройство  может находиться как в слоте,
так  и  на  плате  компьютера  (например,
кемпстон  джойстик,  ПЗУ). Поэтому просто
по сигналу RD/ разрешать передачу нельзя.
Для  устранения  данного конфликта схема,
собранная на микросхемах ЛА2, ЛА3 и одном
элементе ЛЛ1. Если ни одна из карт не от-
ветила  на RD/, то шина данных  находится
в  состоянии лог. "1" (подтянута резисто-
рамми  к  +5V),  проинвертировав сигнал с
выхода  ЛА2  в данном случае получим "1",
который  запрещает  прохождение RD/ через
ЛЛ1 и, тем самым, запрещает передачу дан-
ных  от  слотов к процессору. Если же ка-
кая-то  карта ответила и хотя бы одна ли-
ния данных в нуле, то на ЛЛ1 поступит "0"
и  разрешит  прохождение  RD/,  который в
свою  очередь разрешит прохождение данных
от слотов к процессору.
    Эта  схема  необходима для устранения
зависимости  слотов от сигнала IORQ/, те-
перь возможна установка ПЗУ как в компью-
тере, так и слоте, возможен прямой доступ
к памяти картами, установленными в слоты.

   Теперь еще одна полезная вещь, которая
может находиться на материнке IBM, теперь
уже превращенной в Cross-плату - это мик-
росхема   CMOS-часов   (см.   выше).   По
раскладке  ног  она  полностью аналогична
512ВИ1,  но  вот действие 13-ой ноги нес-
колько  отличается  -  при  подаче на нее
лог.  "0"  она выводит свои выходы данных
из  третьего состояния (Z) и на шине дан-
ных  получается  конфликт, а  вся система
виснет. Поэтому в схему по GLUK'у необхо-
димо  внести  следующие  изменения: между
CMOS-часами и шиной данных установить бу-
фер на АП6. На Cross-плате эта микросхема
уже  стоит и даже соединена всеми данными
с  микросхемой  CMOS  часов. Нужно просто
вторые  выводы соединить с шиной данных и
собрать  схемку  управления.

        Теперь несколько советов.

    Чтобы  выпаять  SIMM  или  разъем под
слот  я  поступаю так: устанавливаю плату
вниз  элементами  так,  чтобы под слотами
оставалось  место и прогревая каждую нож-
ку,  вдавливаю  торчащую часть в плату. С
обратной   стороны   появляется  торчащий
край, за него ножку можно полностью выта-
щить.
    Перед  высверливанием отверстие лучше
очистить от припоя, тогда получается точ-
нее и  нет смещения. Будьте внимательны и
не высверлите сам разъем.
    При разводке плат карт необходимо ис-
пользовать все контакты питания, при этом
нет необходимости соединять всю землю или
+5V  на карте между собой, они соединятся
через разъем слота.
-----------------------------------------
</pre>