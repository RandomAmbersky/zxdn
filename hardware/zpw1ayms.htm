<pre>
Из журнала ZX Power #1
Харьков, 12.10.1996


 
   В ЗАЩИТУ БЕДНОЙ МЫШКИ.
 
                 (C) V.M.G.
________________________________
 
              " Ребята , давайте
                  жить дружно! "
                      Леопольд .
 
  Эпиграф требует некоторого по-
яснения. В последнее время среди
авторов   журнала  " ZX FORMAT "
и  других  компьютерных  изданий
вошел  в  моду  стиль , типа :
 "Мои мысли - дар непосвященным,
любое  инакомыслие  -  бред " .
 Не будем оценивать первую часть
этой  идеи - она  безопасна  для
окружающих , а вот вторая ...
   Ребята , господа , хлопцы !
 Давайте оставим возню у постели
тяжело больного . Пусть каждый в
силу своих способностей помогает
SPECCY выжить , а остальные кон-
структивно относятся к таким по-
пыткам.
  Каюсь , я довольно долго скеп-
тически относился к необходимос-
ти расширения ОЗУ компьютера  до
 512К  и  не публиковал соответ-
ствующую схему .  Но процесс все
равно пошел , не спрашивая моего
мнения ,  -  теперь на Восточной
Украине, наверное, больше " Пен-
тагонов " с 512К , чем со 128К .
Сама  схема  расширения  ОЗУ  до
512К  -  это  массовое  народное
творчество .  Оставалось  только
систематизировать " фольклор " ,
оформить и издать.
  То же относится и к AY-MOUSE .
Можно ли теперь проследить , кто
первым начал эксперименты с под-
ключением популярной тогда "кор-
ветовской" мыши к SPECCY? - Нет!
Эту "мышь" родила не гора мозгов
в чьем-то могучем лбу , а непри-
хотливая фантазия  юзерских "ни-
зов" .  И это незаконнорожденное
дитя вызывает, почему-то , у не-
которых слонов  схемотехники па-
нический  ужас  вместо снисходи-
тельной улыбки.
    Успокойтесь , все будет нор-
мально !   Если  вы  пользуетесь
KEMPSTON MOUSE , то  никто , по-
верьте , не собирается врываться
в ваш  дом и принуждать  вас не-
медленно  обкарнать  ее  до раз-
меров   AY ;   встретив   строку
" AY-MOUSE " в менюшке , специа-
лист может переделать  имеющийся
драйвер под свою  любимую мышь ,
а остальные могут не обращать на
эту строчку внимания.
 Сам я - бывший работник системы
Госстандарта - считаю , что один
старый стандарт лучше одного но-
вого . Каждый месяц бесповоротно
решаю подключить KEMPSTON MOUSE,
но когда вижу эту кучу деталей и
истерзанную  системную шину сво-
его компьютера, то такое желание
постепенно проходит.
 И тогда взгляд невольно остана-
вливается на испуганно забившей-
ся в угол  AY-MOUSE , которую  я
когда-то принес домой, отогрел и
подключил к SPECCY за 5 минут. И
все детальки спокойно размещают-
ся в ее корпусе.
 Зачем с азартом, достойным луч-
шего  применения , махать руками
на бедную мышку ? Я знаю о недо-
статках AY-MOUSE больше, чем лю-
бой из ее критиков . Самый роко-
вой из них - маленькая " память"
(4+4 бита). Т.е. , если механизм
вашей мыши выдает довольно высо-
кое число импульсов на сантиметр
перемещения, а ее хозяин еще бо-
лее импульсивен , то перполнение
у  мыши  случается  раньше , чем
следующее  прерывание  ( с выте-
кающими последствиями ) .
   При наличии доброй воли любая
беда  поправима .  Счетчики  AY-
MOUSE  могут  загружаться числом
" 8 " по сигналу из компьютера .
Поэтому можно установить счетчи-
ки в начале какой-нибудь длинной
и регулярной процедуры и считать
их после ее окончания. Разность,
естественно  ,   пропорциональна
перемещению мыши .
   Автор не ставил  перед  собой
цели  рекламирования  AY-MOUSE ,
так как не имеет с этого коммер-
ческой  выгоды .  Цель  статьи -
ближе  познакомить пользователей
и   программистов  с  одной   из
сравнительно  давно существующих
" примочек " на SPECCY. Думать и
решать вам самим . А если  мысли
и решения автора, вдруг, не сов-
пали  с  вашими , то  не спешите
возмущенно  хвататься  за перо -
просто  нажмите одну , известную
вам , кнопочку на компьютере ...
 
 Для тех , кто еще с нами , при-
вожу  схему  и краткое  описание
AY-MOUSE .
   Если  вдруг у вас в  тумбочке
давно лежит мышь от ПК "КОРВЕТ",
то вам  повезло - подключайте ее
к порту 'А' музыкального  сопро-
цессора и работайте !  Если же у
вас нет именно такой "мыши" , то
вам повезло дважды - во-первых ,
" корветовская " мышь собрана на
микрухах и жутко щелкает, а, во-
вторых ,  вы  можете  переделать
любую мышь в AY-mouse по предла-
гаемой схеме . После тщательного
потрошения ,  все  детали  можно
разместить в корпусе мыши .
    Используются  сигналы  непо-
средственно с 4-х оптопар: двух,
установленных  на колесе , отве-
чающем за вертикальное перемеще-
ние (обозначены как VER1,VER2) ,
и двух , установленных на колесе
горизонтального      перемещения
( HOR1 , HOR2 ).
</pre>
<img src=zpw1ayms/pic1.gif>
<pre>
PA0 ... PA7 - выводы порта A
музыкального сопроцессора.

НАЛАДКА . Добейтесь появления
устойчивых  периодических сигна-
лов  на выходах  2,4,6,8  микро-
схемы  D1 при перемещении мыши .
Для  этого , возможно , придется
подтянуть соответствующие  входы
ТЛ2 резисторами к +5V или " зем-
ле". Также возможен более точный
подбор  емкости  и  резистора на
выходе D1.6 . Некоторые " мыши "
выдают повышенное  число импуль-
сов на сантиметр перемещения : с
этим  придется  смириться , хотя
автору  известны случаи  как за-
клеивания " лишних " отверстий ,
так и установки делителя частоты
на ТМ2 .
      ПРОГРАММИРОВАНИЕ .
 Сначала настраиваем порт 'А' на
вывод командами :    OUT 65533,7
  OUT 49149,255 : OUT 65533,14
( интересно , что  при  этом  он
может работать и на ввод ) . При
записи  в порт  49149  числа 112
мультиплексор  D6  переключается
на счетчик  вертикальных переме-
щений  D3 ( биты 0...3 ) , а при
записи в тот же порт числа  48 -
на счетчик  горизонтальных пере-
мещений  D4  и ,  одновременно ,
через элемент  D1.6 и RC-цепочку
устанавливается начальное значе-
ние '8' на обоих счетчиках . Би-
ты  4 и 5  индицируют  состояние
кнопок ( нажато - '0' ) .  Бит 7
используется   для  тестирования
компьютера и создания эффектов ,
типа MULTICOLOR .
 
             . . .
 
  В приложении  к  этому  номеру
имеется программа " ARTMOUSE " -
это " ART STUDIO ", адаптирован-
ная   by  COBRA   под   AY-MOUSE
( с  другими  манипуляторами  не
работает ) .
________________________________






Из журнала ZX Power #2
Харьков, 25.05.1997



          СНОВА О МЫШАХ.
________________________________
 
   Статья об  AY-MOUSE  в первом
номере  нашего  журнала  вызвала
целый поток писем на  "мышинную"
тему. Мы попросили  В.М.Г. (VMG)
ответить  на  наиболее  типичные
вопросы читателей (Ч).
 
Ч: Подключается ли Кемпстон мышь
   через  разъем кемпстон джойс-
   тика?
 
VMG: Нет. Между двумя этими уст-
   тройствами нет ничего общего,
   кроме слова Kempston.
 
Ч: Какую мышь лучше подключить -
   AY или Kempston?

VMG: Идеальный вариант  -  иметь
   обе мыши. Для этого из корпу-
   са мыши лучше  вывести только
   усиленные сигналы  с  оптопар
   (см. схему ниже). Если не хо-
   чется особенно морочиться, то
   повторяю: AYMOUSE - чисто ук-
   раинский стандарт, а Kempston
   Mouse - МЕЖДУНАРОДНЫЙ (за ис-
   ключением "питерской" средней
   кнопки).

Ч: У нас, в глубинке,есть только
   двухкнопочные мыши,а в описа-
   нии   оболочки  "Pink  Floyd"
   упоминается  какая-то средняя
   кнопка...

VMG: Если нет выбора,то покупай-
   те двухкнопочную. Могу в уте-
   шение  сказать, что и у боль-
   шинства  харьковчан такие  же
   Кемпстон мыши. Поэтому  прог-
   раммисты, заинтересованные  в
   широком распространении свое-
   го софта, наверняка не станут
   использовать  среднюю  кнопку
   для важных,а тем более недуб-
   лированных, функций.

Ч: Переделанная "фирменная" мышь
   на кнопки реагирует,а переме-
   щать курсор не хочет (вариант
   - курсор "дрыгается").

VMG: Да, на  некоторых таких мы-
   шах  недостаточная  амплитуда
   выходного сигнала непосредст-
   венно  с оптопар. Один  выход
   из   положения  - усилители -
   описан в  "ZX Power #1", дру-
   гой  -  использование  микро-
   схемы  ТЛ  561-й  серии  -  в
   "ZX Format #5". Третье  реше-
   ние - подать 12V  на фотодио-
   ды - могу рекомендовать толь-
   ко тем, у кого есть  осцилло-
   граф  и  голова на плечах.  А
   наилучшим, может быть, станет
   решение, присланное читателем
   А.Шатохиным из г.Зеленодольс-
   ка:
</pre>
<img src=zpw1ayms/pic2.gif>
<pre>
   Здесь  триггер  Шмитта выпол-
нен на КМОП-элементе, охваченном
положительной  обратной  связью.
Удобно, что  в 561 ЛП2  входит 4
таких элемента,нумерация их вхо-
дов и выходов: 1,2 и 3; 5,6 и 4;
8,9 и 10; 12,13 и 11. На 7-й вы-
вод  подаем  "землю", а  на 14-й
+5V. Если  вы все-таки  завели в
мышь  +12V, то, чтобы не  тянуть
еще один провод,+5V можно "изго-
товить" внутри ее корпуса на ре-
зисторе  и   стабилитроне   либо
только на КРЕН5А.
   От дерганья  мышь могут выле-
чить конденсаторы,  поставленные
между "землей" и выходами (иног-
да  входами)  триггеров   Шмитта
(микросхема  ТЛ).   Начните    с
0.1 мФ.

   Желаю всяческих успехов и еще
раз  напоминаю, что  по телефону
консультации  по схемам  не  даю
(пожалейте   моих   родителей!).
Харьковчане могут найти  меня по
выходным  на  Кутузовском  рынке
(м. Героев Труда) либо  по втор-
никам с 17 до 18 на "спектрумов-
ской тусовке"  (бывший  вечерний
базар возле м.Советская). Иного-
родним отвечу  по почте, естест-
венно,только при наличии вложен-
ного конверта с маркой или с ка-
кой-либо полезной вещью.
________________________________
</pre>